<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Sona Protocol</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="book.css">

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item "><a href="index.html">Home</a></li><li class="chapter-item affix "><li class="part-title">contracts</li><li class="chapter-item "><a href="contracts/access/index.html">❱ access</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="contracts/access/SonaAdmin.sol/contract.SonaAdmin.html">SonaAdmin</a></li><li class="chapter-item "><a href="contracts/access/SonaMinter.sol/abstract.SonaMinter.html">SonaMinter</a></li></ol></li><li class="chapter-item "><a href="contracts/interfaces/index.html">❱ interfaces</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="contracts/interfaces/IRewardGateway.sol/interface.IRewardGateway.html">IRewardGateway</a></li><li class="chapter-item "><a href="contracts/interfaces/ISonaReserveAuction.sol/interface.ISonaReserveAuction.html">ISonaReserveAuction</a></li><li class="chapter-item "><a href="contracts/interfaces/ISonaRewardToken.sol/interface.ISonaRewardToken.html">ISonaRewardToken</a></li><li class="chapter-item "><a href="contracts/interfaces/IWETH.sol/interface.IWETH.html">IWETH</a></li></ol></li><li class="chapter-item "><a href="contracts/payout/index.html">❱ payout</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="contracts/payout/interfaces/index.html">❱ interfaces</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="contracts/payout/interfaces/ISplitMain.sol/interface.ISplitMain.html">ISplitMain</a></li></ol></li><li class="chapter-item "><a href="contracts/payout/SplitMain.sol/error.Unauthorized.html">Unauthorized</a></li><li class="chapter-item "><a href="contracts/payout/SplitMain.sol/error.InvalidSplit__TooFewAccounts.html">InvalidSplit__TooFewAccounts</a></li><li class="chapter-item "><a href="contracts/payout/SplitMain.sol/error.InvalidSplit__AccountsAndAllocationsMismatch.html">InvalidSplit__AccountsAndAllocationsMismatch</a></li><li class="chapter-item "><a href="contracts/payout/SplitMain.sol/error.InvalidSplit__InvalidAllocationsSum.html">InvalidSplit__InvalidAllocationsSum</a></li><li class="chapter-item "><a href="contracts/payout/SplitMain.sol/error.InvalidSplit__AccountsOutOfOrder.html">InvalidSplit__AccountsOutOfOrder</a></li><li class="chapter-item "><a href="contracts/payout/SplitMain.sol/error.InvalidSplit__AllocationMustBePositive.html">InvalidSplit__AllocationMustBePositive</a></li><li class="chapter-item "><a href="contracts/payout/SplitMain.sol/error.InvalidSplit__InvalidDistributorFee.html">InvalidSplit__InvalidDistributorFee</a></li><li class="chapter-item "><a href="contracts/payout/SplitMain.sol/error.InvalidSplit__InvalidHash.html">InvalidSplit__InvalidHash</a></li><li class="chapter-item "><a href="contracts/payout/SplitMain.sol/error.InvalidNewController.html">InvalidNewController</a></li><li class="chapter-item "><a href="contracts/payout/SplitMain.sol/contract.SplitMain.html">SplitMain</a></li><li class="chapter-item "><a href="contracts/payout/SplitWallet.sol/error.Unauthorized.html">Unauthorized</a></li><li class="chapter-item "><a href="contracts/payout/SplitWallet.sol/contract.SplitWallet.html">SplitWallet</a></li></ol></li><li class="chapter-item "><a href="contracts/test/index.html">❱ test</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="contracts/test/access/index.html">❱ access</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="contracts/test/access/SonaAdmin.t.sol/contract.SonaAdminTest.html">SonaAdminTest</a></li></ol></li><li class="chapter-item "><a href="contracts/test/mock/index.html">❱ mock</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="contracts/test/mock/ContractBidderMock.sol/contract.ContractBidderMock.html">ContractBidderMock</a></li><li class="chapter-item "><a href="contracts/test/mock/ERC20Mock.sol/contract.ERC20ReturnTrueMock.html">ERC20ReturnTrueMock</a></li><li class="chapter-item "><a href="contracts/test/mock/ERC20Mock.sol/contract.ERC20ReturnFalseMock.html">ERC20ReturnFalseMock</a></li><li class="chapter-item "><a href="contracts/test/mock/ERC20Mock.sol/contract.ERC20NoReturnMock.html">ERC20NoReturnMock</a></li><li class="chapter-item "><a href="contracts/test/mock/RewardTokenMock.sol/contract.RewardTokenMock.html">RewardTokenMock</a></li><li class="chapter-item "><a href="contracts/test/mock/Weth9Mock.sol/contract.Weth9Mock.html">Weth9Mock</a></li></ol></li><li class="chapter-item "><a href="contracts/test/SonaReserveAuction.t.sol/contract.SonaReserveAuctionTest.html">SonaReserveAuctionTest</a></li><li class="chapter-item "><a href="contracts/test/SonaRewardToken.t.sol/contract.SonaRewardTokenTest.html">SonaRewardTokenTest</a></li><li class="chapter-item "><a href="contracts/test/SonaRewards.t.sol/contract.SonaTestRewards.html">SonaTestRewards</a></li><li class="chapter-item "><a href="contracts/test/Util.sol/contract.Util.html">Util</a></li></ol></li><li class="chapter-item "><a href="contracts/utils/index.html">❱ utils</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="contracts/utils/AddressableTokenId.sol/library.AddressableTokenId.html">AddressableTokenId</a></li><li class="chapter-item "><a href="contracts/utils/Clones.sol/error.CreateError.html">CreateError</a></li><li class="chapter-item "><a href="contracts/utils/Clones.sol/error.Create2Error.html">Create2Error</a></li><li class="chapter-item "><a href="contracts/utils/Clones.sol/library.Clones.html">Clones</a></li><li class="chapter-item "><a href="contracts/utils/ZeroCheck.sol/library.ZeroCheck.html">ZeroCheck</a></li></ol></li><li class="chapter-item "><a href="contracts/SonaReserveAuction.sol/contract.SonaReserveAuction.html">SonaReserveAuction</a></li><li class="chapter-item "><a href="contracts/SonaRewardToken.sol/contract.SonaRewardToken.html">SonaRewardToken</a></li><li class="chapter-item "><a href="contracts/SonaRewards.sol/contract.SonaRewards.html">SonaRewards</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Sona Protocol</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/sonastream/core" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="sona-protocol"><a class="header" href="#sona-protocol">Sona Protocol <img src="https://img.shields.io/badge/solidity-%3E%3D%200.8.16-lime" alt="Solidity Version" /></a></h1>
<div align="left">
  <h4>
    <a href="https://sona.stream">
      Website
    </a>
    <span> | </span>
    <a href="https://docs.sona.stream">
      Documentation
    </a>
    <span> | </span>
    <a href="https://github.com/sonastream/core/releases">
      Releases
    </a>
    <span> | </span>
    <a href="https://twitter.com/sonastream">
      Twitter
    </a>
  </h4>
</div>
<blockquote>
<p><strong>Warning</strong></p>
<p>These contracts are <strong>unaudited</strong> and are not recommended for a mainnet deploy unless otherwise stated.</p>
</blockquote>
<h2 id="table-of-contents"><a class="header" href="#table-of-contents">Table of Contents</a></h2>
<ul>
<li><a href="index.html#sona-protocol-">Sona Protocol </a>
<ul>
<li><a href="index.html#table-of-contents">Table of Contents</a></li>
<li><a href="index.html#requirements">Requirements</a></li>
<li><a href="index.html#contracts">Contracts</a></li>
<li><a href="index.html#getting-started">Getting Started</a>
<ul>
<li><a href="index.html#installation">Installation</a></li>
<li><a href="index.html#commands">Commands</a></li>
<li><a href="index.html#headers">Headers</a></li>
<li><a href="index.html#testing">Testing</a></li>
<li><a href="index.html#coverage">Coverage</a></li>
<li><a href="index.html#environment">Environment</a></li>
<li><a href="index.html#deploying">Deploying</a></li>
<li><a href="index.html#foundry-and-type-definitions">Foundry and type definitions</a></li>
</ul>
</li>
<li><a href="index.html#analyzers">Analyzers</a></li>
<li><a href="index.html#maintainers">Maintainers</a></li>
</ul>
</li>
</ul>
<h2 id="requirements"><a class="header" href="#requirements">Requirements</a></h2>
<ul>
<li><a href="https://pnpm.io/installation">pnpm</a></li>
<li><a href="https://www.python.org/downloads/">Python3</a></li>
<li><a href="https://github.com/pypa/pipx">pipx</a></li>
<li><a href="https://github.com/foundry-rs/foundry">Foundry</a> | Or run <code>./foundry_install.sh</code></li>
<li>git</li>
<li>make</li>
<li><a href="https://github.com/crytic/slither">Slither</a></li>
<li>Solc 0.8.16</li>
<li>Rust</li>
<li><a href="https://github.com/0xKitsune/solstat#currently-identified-optimizations-vulnerabilities-and-qa">Solstat</a></li>
</ul>
<h2 id="contracts"><a class="header" href="#contracts">Contracts</a></h2>
<pre><code class="language-bash">contracts
├── SonaReserveAuction.sol
├── SonaRewardToken.sol
├── SonaRewards.sol
├── access
│   ├── SonaAdmin.sol
│   └── SonaMinter.sol
├── interfaces
│   ├── IRewardGateway.sol
│   ├── ISonaReserveAuction.sol
│   ├── ISonaRewardToken.sol
│   └── IWETH.sol
├── test
│   ├── SonaReserveAuction.t.sol
│   ├── SonaRewardToken.t.sol
│   ├── SonaRewards.t.sol
│   ├── Util.sol
│   ├── access
│   │   └── SonaAdmin.t.sol
│   └── mock
│       ├── ContractBidderMock.sol
│       ├── ERC20Mock.sol
│       └── Weth9Mock.sol
└── utils
    ├── AddressableTokenId.sol
    └── ZeroCheck.sol

</code></pre>
<h2 id="getting-started"><a class="header" href="#getting-started">Getting Started</a></h2>
<h3 id="installation"><a class="header" href="#installation">Installation</a></h3>
<ul>
<li>With git installed, run <code>git clone https://github.com/sonastream/core.git</code></li>
<li><code>cd</code> in to <code>core</code></li>
<li>Run <code>make install</code></li>
</ul>
<h3 id="commands"><a class="header" href="#commands">Commands</a></h3>
<p>To see all commands that can be run with <code>make</code>, check out the makefile command <a href="./Makefile.html">table</a></p>
<h3 id="headers"><a class="header" href="#headers">Headers</a></h3>
<ul>
<li>Install https://github.com/transmissions11/headers</li>
<li>Run <code>headers &lt;insert-header&gt;</code></li>
<li>Paste from your clipboard</li>
</ul>
<h3 id="testing"><a class="header" href="#testing">Testing</a></h3>
<p>To run tests, run the command <code>make test</code>. To change the logs verbosity, update the makefile' command with less or more <code>v</code></p>
<h3 id="coverage"><a class="header" href="#coverage">Coverage</a></h3>
<p>To get the test coverage, run <code>make cover</code></p>
<h3 id="environment"><a class="header" href="#environment">Environment</a></h3>
<p>Fill in your <code>.env</code> at your root with:</p>
<pre><code>RPC_URL=
OWNER=
ETHERSCAN_KEY=
TREASURY=
REDISTRIBUTION=
AUTHORIZER=
PRIVATE_KEY=
</code></pre>
<h3 id="deploying"><a class="header" href="#deploying">Deploying</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Command</th><th>Environment</th></tr></thead><tbody>
<tr><td>make deploy_local</td><td>Local anvil (http://localhost:8545)</td></tr>
<tr><td>make deploy_testnet</td><td>Testnet</td></tr>
<tr><td>make deploy</td><td>Mainnet</td></tr>
<tr><td>make deploy_goerli</td><td>Goerli</td></tr>
</tbody></table>
</div>
<blockquote>
<p><strong>Important</strong></p>
<p>To see more <code>make</code> command definitions, check out this <a href="./Makefile.html">document</a></p>
</blockquote>
<h3 id="foundry-and-type-definitions"><a class="header" href="#foundry-and-type-definitions">Foundry and type definitions</a></h3>
<p>When updating foundry modules, commit your changes locally and run <code>forge install &lt;package-name&gt;</code>. Then, update the remappings across the following files to allow builds, security scanning and goto definitions to work properly:</p>
<ul>
<li>slitherConfig.json</li>
<li>.vscode/settings.json</li>
<li>remappings.txt</li>
</ul>
<h2 id="analyzers"><a class="header" href="#analyzers">Analyzers</a></h2>
<p>The repo comes with two static analyzers for checking for security vulnerabiltiies and gas optimizations
| Command | Environment |
|---------|-------------|
| make analyze | Runs solstat and outputs a report to <code>reports/solstat_report.md</code> |
| make sec | Runs slither and outputs a report to stdout |</p>
<h2 id="maintainers"><a class="header" href="#maintainers">Maintainers</a></h2>
<ul>
<li><a href="https://github.com/mudrush">@mudrush</a></li>
<li><a href="https://github.com/topocount">@topocount</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents"><a class="header" href="#contents">Contents</a></h1>
<ul>
<li><a href="contracts/access/SonaAdmin.sol/contract.SonaAdmin.html">SonaAdmin</a></li>
<li><a href="contracts/access/SonaMinter.sol/abstract.SonaMinter.html">SonaMinter</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sonaadmin"><a class="header" href="#sonaadmin">SonaAdmin</a></h1>
<p><a href="https://github.com/sonastream/core/blob/7c2284c734e2c8a2224e94ea1880647f1e8a0962/contracts/access/SonaAdmin.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
UUPSUpgradeable, AccessControl</p>
<h2 id="state-variables"><a class="header" href="#state-variables">State Variables</a></h2>
<h3 id="_admin_role"><a class="header" href="#_admin_role">_ADMIN_ROLE</a></h3>
<p><em>The bytes that represent an admin role</em></p>
<pre><code class="language-solidity">bytes32 internal constant _ADMIN_ROLE = keccak256(&quot;ADMIN_ROLE&quot;);
</code></pre>
<h3 id="__gap"><a class="header" href="#__gap">__gap</a></h3>
<p><em>This empty reserved space is put in place to allow future versions to add new
variables without shifting down storage in the inheritance chain.
See https://docs.openzeppelin.com/contracts/4.x/upgradeable#storage_gaps</em></p>
<pre><code class="language-solidity">uint256[50] private __gap;
</code></pre>
<h2 id="functions"><a class="header" href="#functions">Functions</a></h2>
<h3 id="onlysonaadmin"><a class="header" href="#onlysonaadmin">onlySonaAdmin</a></h3>
<p><em>Modifier that ensures the calling wallet has the admin role</em></p>
<pre><code class="language-solidity">modifier onlySonaAdmin();
</code></pre>
<h3 id="issonaadmin"><a class="header" href="#issonaadmin">isSonaAdmin</a></h3>
<p><em>Checks if the specified address is a Sona admin</em></p>
<pre><code class="language-solidity">function isSonaAdmin(address account) public view returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>account</code></td><td><code>address</code></td><td>The address to check</td></tr>
</tbody></table>
</div>
<h3 id="_authorizeupgrade"><a class="header" href="#_authorizeupgrade">_authorizeUpgrade</a></h3>
<p><em>SonaAdmin is authorized for upgrades</em></p>
<pre><code class="language-solidity">function _authorizeUpgrade(address newImplementation)
    internal
    override
    onlySonaAdmin;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sonaminter"><a class="header" href="#sonaminter">SonaMinter</a></h1>
<p><a href="https://github.com/sonastream/core/blob/7c2284c734e2c8a2224e94ea1880647f1e8a0962/contracts/access/SonaMinter.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="contracts/access/SonaMinter.sol//contracts/access/SonaAdmin.sol/contract.SonaAdmin.html">SonaAdmin</a>, ERC721</p>
<h2 id="state-variables-1"><a class="header" href="#state-variables-1">State Variables</a></h2>
<h3 id="_minter_role"><a class="header" href="#_minter_role">_MINTER_ROLE</a></h3>
<p><em>The bytes that represent an admin role</em></p>
<pre><code class="language-solidity">bytes32 internal constant _MINTER_ROLE = keccak256(&quot;MINTER_ROLE&quot;);
</code></pre>
<h3 id="__gap-1"><a class="header" href="#__gap-1">__gap</a></h3>
<p><em>This empty reserved space is put in place to allow future versions to add new
variables without shifting down storage in the inheritance chain.
See https://docs.openzeppelin.com/contracts/4.x/upgradeable#storage_gaps</em></p>
<pre><code class="language-solidity">uint256[50] private __gap;
</code></pre>
<h2 id="functions-1"><a class="header" href="#functions-1">Functions</a></h2>
<h3 id="initialize"><a class="header" href="#initialize">initialize</a></h3>
<p><em>to be called in the child initializer</em></p>
<pre><code class="language-solidity">function initialize(address _minter) public onlyInitializing;
</code></pre>
<h3 id="onlysonaminter"><a class="header" href="#onlysonaminter">onlySonaMinter</a></h3>
<p><em>Modifier that ensures the caller has the minter role</em></p>
<pre><code class="language-solidity">modifier onlySonaMinter();
</code></pre>
<h3 id="supportsinterface"><a class="header" href="#supportsinterface">supportsInterface</a></h3>
<p><em>Resolves conflict between ERC721AUpgradable and AccessControl so we don't have to do it on a per contract basis.</em></p>
<pre><code class="language-solidity">function supportsInterface(bytes4 interfaceId)
    public
    view
    virtual
    override(ERC721, AccessControl)
    returns (bool);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-1"><a class="header" href="#contents-1">Contents</a></h1>
<ul>
<li><a href="contracts/interfaces/IRewardGateway.sol/interface.IRewardGateway.html">IRewardGateway</a></li>
<li><a href="contracts/interfaces/ISonaReserveAuction.sol/interface.ISonaReserveAuction.html">ISonaReserveAuction</a></li>
<li><a href="contracts/interfaces/ISonaRewardToken.sol/interface.ISonaRewardToken.html">ISonaRewardToken</a></li>
<li><a href="contracts/interfaces/IWETH.sol/interface.IWETH.html">IWETH</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="irewardgateway"><a class="header" href="#irewardgateway">IRewardGateway</a></h1>
<p><a href="https://github.com/sonastream/core/blob/7c2284c734e2c8a2224e94ea1880647f1e8a0962/contracts/interfaces/IRewardGateway.sol">Git Source</a></p>
<h2 id="functions-2"><a class="header" href="#functions-2">Functions</a></h2>
<h3 id="getrewardsforperiod"><a class="header" href="#getrewardsforperiod">getRewardsforPeriod</a></h3>
<pre><code class="language-solidity">function getRewardsforPeriod(uint256 _tokenId, uint64 _start, uint64 _end)
    external
    view;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="isonareserveauction"><a class="header" href="#isonareserveauction">ISonaReserveAuction</a></h1>
<p><a href="https://github.com/sonastream/core/blob/7c2284c734e2c8a2224e94ea1880647f1e8a0962/contracts/interfaces/ISonaReserveAuction.sol">Git Source</a></p>
<h2 id="functions-3"><a class="header" href="#functions-3">Functions</a></h2>
<h3 id="createreserveauction"><a class="header" href="#createreserveauction">createReserveAuction</a></h3>
<pre><code class="language-solidity">function createReserveAuction(
    MetadataBundle[2] calldata _bundles,
    Signature[2] calldata _signatures,
    address _currencyAddress,
    uint256 _reservePrice
) external;
</code></pre>
<h3 id="cancelreserveauction"><a class="header" href="#cancelreserveauction">cancelReserveAuction</a></h3>
<pre><code class="language-solidity">function cancelReserveAuction(uint256 _tokenId) external;
</code></pre>
<h3 id="settlereserveauction"><a class="header" href="#settlereserveauction">settleReserveAuction</a></h3>
<pre><code class="language-solidity">function settleReserveAuction(uint256 _tokenId) external;
</code></pre>
<h3 id="updatereserveauctionprice"><a class="header" href="#updatereserveauctionprice">updateReserveAuctionPrice</a></h3>
<pre><code class="language-solidity">function updateReserveAuctionPrice(uint256 _tokenId, uint256 _reservePrice)
    external;
</code></pre>
<h3 id="updatereserveauctionpriceandcurrency"><a class="header" href="#updatereserveauctionpriceandcurrency">updateReserveAuctionPriceAndCurrency</a></h3>
<pre><code class="language-solidity">function updateReserveAuctionPriceAndCurrency(
    address _currency,
    uint256 _tokenId,
    uint256 _reservePrice
) external;
</code></pre>
<h3 id="createbid"><a class="header" href="#createbid">createBid</a></h3>
<pre><code class="language-solidity">function createBid(uint256 _tokenId, uint256 _bidAmount) external payable;
</code></pre>
<h3 id="getauction"><a class="header" href="#getauction">getAuction</a></h3>
<pre><code class="language-solidity">function getAuction(uint256 _tokenId) external view returns (Auction memory);
</code></pre>
<h2 id="events"><a class="header" href="#events">Events</a></h2>
<h3 id="reserveauctioncreated"><a class="header" href="#reserveauctioncreated">ReserveAuctionCreated</a></h3>
<p><em>Emitted when a new auction is created</em></p>
<pre><code class="language-solidity">event ReserveAuctionCreated(uint256 indexed tokenId);
</code></pre>
<h3 id="reserveauctioncanceled"><a class="header" href="#reserveauctioncanceled">ReserveAuctionCanceled</a></h3>
<p><em>Emitted when a new auction is canceled</em></p>
<pre><code class="language-solidity">event ReserveAuctionCanceled(uint256 indexed tokenId);
</code></pre>
<h3 id="reserveauctionsettled"><a class="header" href="#reserveauctionsettled">ReserveAuctionSettled</a></h3>
<p><em>Emitted when a new auction is settled</em></p>
<pre><code class="language-solidity">event ReserveAuctionSettled(uint256 indexed tokenId);
</code></pre>
<h3 id="reserveauctionpriceupdated"><a class="header" href="#reserveauctionpriceupdated">ReserveAuctionPriceUpdated</a></h3>
<p><em>Emitted when the reserve price of an auction is updated</em></p>
<pre><code class="language-solidity">event ReserveAuctionPriceUpdated(uint256 indexed tokenId, Auction auction);
</code></pre>
<h3 id="reserveauctionbidplaced"><a class="header" href="#reserveauctionbidplaced">ReserveAuctionBidPlaced</a></h3>
<p><em>Emitted when a new bid is placed</em></p>
<pre><code class="language-solidity">event ReserveAuctionBidPlaced(uint256 indexed tokenId, uint256 indexed amount);
</code></pre>
<h3 id="reserveauctionpriceandcurrencyupdated"><a class="header" href="#reserveauctionpriceandcurrencyupdated">ReserveAuctionPriceAndCurrencyUpdated</a></h3>
<p><em>Emitted when the currency of an auction is updated</em></p>
<pre><code class="language-solidity">event ReserveAuctionPriceAndCurrencyUpdated(
    uint256 indexed tokenId, Auction auction
);
</code></pre>
<h3 id="payoutaddressupdated"><a class="header" href="#payoutaddressupdated">PayoutAddressUpdated</a></h3>
<p><em>Emitted when the payout address is updated. The address can be set to zero to payout the token holder</em></p>
<pre><code class="language-solidity">event PayoutAddressUpdated(uint256 indexed tokenId, address payout);
</code></pre>
<h2 id="errors"><a class="header" href="#errors">Errors</a></h2>
<h3 id="sonareserveauction_alreadycanceled"><a class="header" href="#sonareserveauction_alreadycanceled">SonaReserveAuction_AlreadyCanceled</a></h3>
<pre><code class="language-solidity">error SonaReserveAuction_AlreadyCanceled();
</code></pre>
<h3 id="sonareserveauction_alreadylisted"><a class="header" href="#sonareserveauction_alreadylisted">SonaReserveAuction_AlreadyListed</a></h3>
<pre><code class="language-solidity">error SonaReserveAuction_AlreadyListed();
</code></pre>
<h3 id="sonareserveauction_notauthorized"><a class="header" href="#sonareserveauction_notauthorized">SonaReserveAuction_NotAuthorized</a></h3>
<pre><code class="language-solidity">error SonaReserveAuction_NotAuthorized();
</code></pre>
<h3 id="sonareserveauction_bundlesnotauthorized"><a class="header" href="#sonareserveauction_bundlesnotauthorized">SonaReserveAuction_BundlesNotAuthorized</a></h3>
<pre><code class="language-solidity">error SonaReserveAuction_BundlesNotAuthorized();
</code></pre>
<h3 id="sonareserveauction_transferfailed"><a class="header" href="#sonareserveauction_transferfailed">SonaReserveAuction_TransferFailed</a></h3>
<pre><code class="language-solidity">error SonaReserveAuction_TransferFailed();
</code></pre>
<h3 id="sonareserveauction_bidtoolow"><a class="header" href="#sonareserveauction_bidtoolow">SonaReserveAuction_BidTooLow</a></h3>
<pre><code class="language-solidity">error SonaReserveAuction_BidTooLow();
</code></pre>
<h3 id="sonareserveauction_alreadysettled"><a class="header" href="#sonareserveauction_alreadysettled">SonaReserveAuction_AlreadySettled</a></h3>
<pre><code class="language-solidity">error SonaReserveAuction_AlreadySettled();
</code></pre>
<h3 id="sonareserveauction_duplicate"><a class="header" href="#sonareserveauction_duplicate">SonaReserveAuction_Duplicate</a></h3>
<pre><code class="language-solidity">error SonaReserveAuction_Duplicate();
</code></pre>
<h3 id="sonareserveauction_reservepricecannotbezero"><a class="header" href="#sonareserveauction_reservepricecannotbezero">SonaReserveAuction_ReservePriceCannotBeZero</a></h3>
<pre><code class="language-solidity">error SonaReserveAuction_ReservePriceCannotBeZero();
</code></pre>
<h3 id="sonareserveauction_durationoutofbounds"><a class="header" href="#sonareserveauction_durationoutofbounds">SonaReserveAuction_DurationOutOfBounds</a></h3>
<pre><code class="language-solidity">error SonaReserveAuction_DurationOutOfBounds();
</code></pre>
<h3 id="sonareserveauction_invalidaddress"><a class="header" href="#sonareserveauction_invalidaddress">SonaReserveAuction_InvalidAddress</a></h3>
<pre><code class="language-solidity">error SonaReserveAuction_InvalidAddress();
</code></pre>
<h3 id="sonareserveauction_invalidcurrency"><a class="header" href="#sonareserveauction_invalidcurrency">SonaReserveAuction_InvalidCurrency</a></h3>
<pre><code class="language-solidity">error SonaReserveAuction_InvalidCurrency();
</code></pre>
<h3 id="sonareserveauction_invalidtokenids"><a class="header" href="#sonareserveauction_invalidtokenids">SonaReserveAuction_InvalidTokenIds</a></h3>
<pre><code class="language-solidity">error SonaReserveAuction_InvalidTokenIds();
</code></pre>
<h3 id="sonareserveauction_invalidauction"><a class="header" href="#sonareserveauction_invalidauction">SonaReserveAuction_InvalidAuction</a></h3>
<pre><code class="language-solidity">error SonaReserveAuction_InvalidAuction();
</code></pre>
<h3 id="sonareserveauction_auctionended"><a class="header" href="#sonareserveauction_auctionended">SonaReserveAuction_AuctionEnded</a></h3>
<pre><code class="language-solidity">error SonaReserveAuction_AuctionEnded();
</code></pre>
<h3 id="sonareserveauction_auctionislive"><a class="header" href="#sonareserveauction_auctionislive">SonaReserveAuction_AuctionIsLive</a></h3>
<pre><code class="language-solidity">error SonaReserveAuction_AuctionIsLive();
</code></pre>
<h2 id="structs"><a class="header" href="#structs">Structs</a></h2>
<h3 id="metadatabundle"><a class="header" href="#metadatabundle">MetadataBundle</a></h3>
<pre><code class="language-solidity">struct MetadataBundle {
    uint256 tokenId;
    address payable payout;
    string arweaveTxId;
}
</code></pre>
<h3 id="signature"><a class="header" href="#signature">Signature</a></h3>
<pre><code class="language-solidity">struct Signature {
    uint8 v;
    bytes32 r;
    bytes32 s;
}
</code></pre>
<h3 id="auction"><a class="header" href="#auction">Auction</a></h3>
<pre><code class="language-solidity">struct Auction {
    uint256 reservePrice;
    uint256 endingTime;
    uint256 currentBidAmount;
    address payable trackSeller;
    address payable currentBidder;
    address currency;
    MetadataBundle[2] bundles;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="isonarewardtoken"><a class="header" href="#isonarewardtoken">ISonaRewardToken</a></h1>
<p><a href="https://github.com/sonastream/core/blob/7c2284c734e2c8a2224e94ea1880647f1e8a0962/contracts/interfaces/ISonaRewardToken.sol">Git Source</a></p>
<h2 id="functions-4"><a class="header" href="#functions-4">Functions</a></h2>
<h3 id="mintfromauction"><a class="header" href="#mintfromauction">mintFromAuction</a></h3>
<pre><code class="language-solidity">function mintFromAuction(
    uint256 _tokenId,
    address _artist,
    address _collector,
    string memory _artistCid,
    string memory _collectorCid,
    address payable _payout
) external;
</code></pre>
<h3 id="updatearweavetxid"><a class="header" href="#updatearweavetxid">updateArweaveTxId</a></h3>
<pre><code class="language-solidity">function updateArweaveTxId(uint256 _tokenId, string calldata _TxId) external;
</code></pre>
<h3 id="burnrewardtoken"><a class="header" href="#burnrewardtoken">burnRewardToken</a></h3>
<pre><code class="language-solidity">function burnRewardToken(uint256 _tokenId) external;
</code></pre>
<h3 id="tokenuri"><a class="header" href="#tokenuri">tokenURI</a></h3>
<pre><code class="language-solidity">function tokenURI(uint256 _tokenId) external view returns (string memory);
</code></pre>
<h3 id="getrewardtokenmetadata"><a class="header" href="#getrewardtokenmetadata">getRewardTokenMetadata</a></h3>
<pre><code class="language-solidity">function getRewardTokenMetadata(uint256 _tokenId)
    external
    view
    returns (RewardToken memory metadata);
</code></pre>
<h3 id="getrewardtokenpayoutaddr"><a class="header" href="#getrewardtokenpayoutaddr">getRewardTokenPayoutAddr</a></h3>
<pre><code class="language-solidity">function getRewardTokenPayoutAddr(uint256 _tokenId)
    external
    view
    returns (address payable payout);
</code></pre>
<h3 id="initialize-1"><a class="header" href="#initialize-1">initialize</a></h3>
<pre><code class="language-solidity">function initialize(
    string memory _name,
    string memory _symbol,
    address _eoaAdmin,
    address _minter
) external;
</code></pre>
<h3 id="tokenidexists"><a class="header" href="#tokenidexists">tokenIdExists</a></h3>
<pre><code class="language-solidity">function tokenIdExists(uint256 _tokenId) external view returns (bool exists);
</code></pre>
<h2 id="events-1"><a class="header" href="#events-1">Events</a></h2>
<h3 id="rewardtokenminted"><a class="header" href="#rewardtokenminted">RewardTokenMinted</a></h3>
<p><em>Emitted when a new RewardToken is minted.</em></p>
<pre><code class="language-solidity">event RewardTokenMinted(uint256 indexed tokenId, string cid);
</code></pre>
<h3 id="rewardtokenarweavetxidupdated"><a class="header" href="#rewardtokenarweavetxidupdated">RewardTokenArweaveTxIdUpdated</a></h3>
<p><em>Emitted when a RewardToken's metadata is changed.</em></p>
<pre><code class="language-solidity">event RewardTokenArweaveTxIdUpdated(uint256 tokenId, string txId);
</code></pre>
<h3 id="rewardtokenmetadataupdated"><a class="header" href="#rewardtokenmetadataupdated">RewardTokenMetadataUpdated</a></h3>
<p><em>Emitted when a RewardToken's metadata is changed.</em></p>
<pre><code class="language-solidity">event RewardTokenMetadataUpdated(
    uint256 indexed tokenId, string txId, address payout
);
</code></pre>
<h3 id="rewardtokenremoved"><a class="header" href="#rewardtokenremoved">RewardTokenRemoved</a></h3>
<p><em>Emitted when a RewardToken is removed.</em></p>
<pre><code class="language-solidity">event RewardTokenRemoved(uint256 indexed tokenId);
</code></pre>
<h3 id="initialized"><a class="header" href="#initialized">Initialized</a></h3>
<p><em>Emitted when a RewardToken minter is initialized</em></p>
<pre><code class="language-solidity">event Initialized(address owner, string name, string symbol);
</code></pre>
<h3 id="payoutaddressupdated-1"><a class="header" href="#payoutaddressupdated-1">PayoutAddressUpdated</a></h3>
<p><em>Emitted when the payout address is updated. The address can be set to zero to payout the token holder</em></p>
<pre><code class="language-solidity">event PayoutAddressUpdated(uint256 indexed tokenId, address payout);
</code></pre>
<h2 id="errors-1"><a class="header" href="#errors-1">Errors</a></h2>
<h3 id="sonarewardtoken_doesnotexist"><a class="header" href="#sonarewardtoken_doesnotexist">SonaRewardToken_DoesNotExist</a></h3>
<pre><code class="language-solidity">error SonaRewardToken_DoesNotExist();
</code></pre>
<h3 id="sonarewardtoken_tokeniddoesnotexist"><a class="header" href="#sonarewardtoken_tokeniddoesnotexist">SonaRewardToken_TokenIdDoesNotExist</a></h3>
<pre><code class="language-solidity">error SonaRewardToken_TokenIdDoesNotExist();
</code></pre>
<h3 id="sonarewardtoken_unauthorized"><a class="header" href="#sonarewardtoken_unauthorized">SonaRewardToken_Unauthorized</a></h3>
<pre><code class="language-solidity">error SonaRewardToken_Unauthorized();
</code></pre>
<h3 id="sonarewardtoken_artisteditioneven"><a class="header" href="#sonarewardtoken_artisteditioneven">SonaRewardToken_ArtistEditionEven</a></h3>
<pre><code class="language-solidity">error SonaRewardToken_ArtistEditionEven();
</code></pre>
<h3 id="sonarewardtoken_artisteditionodd"><a class="header" href="#sonarewardtoken_artisteditionodd">SonaRewardToken_ArtistEditionOdd</a></h3>
<pre><code class="language-solidity">error SonaRewardToken_ArtistEditionOdd();
</code></pre>
<h3 id="sonarewardtoken_noartistintokenid"><a class="header" href="#sonarewardtoken_noartistintokenid">SonaRewardToken_NoArtistInTokenId</a></h3>
<pre><code class="language-solidity">error SonaRewardToken_NoArtistInTokenId();
</code></pre>
<h2 id="structs-1"><a class="header" href="#structs-1">Structs</a></h2>
<h3 id="rewardtoken"><a class="header" href="#rewardtoken">RewardToken</a></h3>
<pre><code class="language-solidity">struct RewardToken {
    string arTxId;
    address payable payout;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="iweth"><a class="header" href="#iweth">IWETH</a></h1>
<p><a href="https://github.com/sonastream/core/blob/7c2284c734e2c8a2224e94ea1880647f1e8a0962/contracts/interfaces/IWETH.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
IERC20</p>
<h2 id="functions-5"><a class="header" href="#functions-5">Functions</a></h2>
<h3 id="deposit"><a class="header" href="#deposit">deposit</a></h3>
<pre><code class="language-solidity">function deposit() external payable;
</code></pre>
<h3 id="withdraw"><a class="header" href="#withdraw">withdraw</a></h3>
<pre><code class="language-solidity">function withdraw(uint256 wad) external;
</code></pre>
<h2 id="events-2"><a class="header" href="#events-2">Events</a></h2>
<h3 id="deposit-1"><a class="header" href="#deposit-1">Deposit</a></h3>
<pre><code class="language-solidity">event Deposit(address indexed dst, uint256 wad);
</code></pre>
<h3 id="withdrawal"><a class="header" href="#withdrawal">Withdrawal</a></h3>
<pre><code class="language-solidity">event Withdrawal(address indexed src, uint256 wad);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-2"><a class="header" href="#contents-2">Contents</a></h1>
<ul>
<li><a href="contracts/payout//contracts/payout/interfaces">interfaces</a></li>
<li><a href="contracts/payout/SplitMain.sol/error.Unauthorized.html">Unauthorized</a></li>
<li><a href="contracts/payout/SplitMain.sol/error.InvalidSplit__TooFewAccounts.html">InvalidSplit__TooFewAccounts</a></li>
<li><a href="contracts/payout/SplitMain.sol/error.InvalidSplit__AccountsAndAllocationsMismatch.html">InvalidSplit__AccountsAndAllocationsMismatch</a></li>
<li><a href="contracts/payout/SplitMain.sol/error.InvalidSplit__InvalidAllocationsSum.html">InvalidSplit__InvalidAllocationsSum</a></li>
<li><a href="contracts/payout/SplitMain.sol/error.InvalidSplit__AccountsOutOfOrder.html">InvalidSplit__AccountsOutOfOrder</a></li>
<li><a href="contracts/payout/SplitMain.sol/error.InvalidSplit__AllocationMustBePositive.html">InvalidSplit__AllocationMustBePositive</a></li>
<li><a href="contracts/payout/SplitMain.sol/error.InvalidSplit__InvalidDistributorFee.html">InvalidSplit__InvalidDistributorFee</a></li>
<li><a href="contracts/payout/SplitMain.sol/error.InvalidSplit__InvalidHash.html">InvalidSplit__InvalidHash</a></li>
<li><a href="contracts/payout/SplitMain.sol/error.InvalidNewController.html">InvalidNewController</a></li>
<li><a href="contracts/payout/SplitMain.sol/contract.SplitMain.html">SplitMain</a></li>
<li><a href="contracts/payout/SplitWallet.sol/error.Unauthorized.html">Unauthorized</a></li>
<li><a href="contracts/payout/SplitWallet.sol/contract.SplitWallet.html">SplitWallet</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-3"><a class="header" href="#contents-3">Contents</a></h1>
<ul>
<li><a href="contracts/payout/interfaces/ISplitMain.sol/interface.ISplitMain.html">ISplitMain</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="isplitmain"><a class="header" href="#isplitmain">ISplitMain</a></h1>
<p><a href="https://github.com/sonastream/core/blob/7c2284c734e2c8a2224e94ea1880647f1e8a0962/contracts/payout/interfaces/ISplitMain.sol">Git Source</a></p>
<p><strong>Author:</strong>
0xSplits <a href="mailto:contracts/payout/interfaces/ISplitMain.sol/will@0xSplits.xyz">will@0xSplits.xyz</a></p>
<h2 id="functions-6"><a class="header" href="#functions-6">Functions</a></h2>
<h3 id="walletimplementation"><a class="header" href="#walletimplementation">walletImplementation</a></h3>
<p>FUNCTIONS</p>
<pre><code class="language-solidity">function walletImplementation() external returns (address);
</code></pre>
<h3 id="createsplit"><a class="header" href="#createsplit">createSplit</a></h3>
<pre><code class="language-solidity">function createSplit(
    address[] calldata accounts,
    uint32[] calldata percentAllocations,
    uint32 distributorFee,
    address controller
) external returns (address);
</code></pre>
<h3 id="predictimmutablesplitaddress"><a class="header" href="#predictimmutablesplitaddress">predictImmutableSplitAddress</a></h3>
<pre><code class="language-solidity">function predictImmutableSplitAddress(
    address[] calldata accounts,
    uint32[] calldata percentAllocations,
    uint32 distributorFee
) external view returns (address);
</code></pre>
<h3 id="updatesplit"><a class="header" href="#updatesplit">updateSplit</a></h3>
<pre><code class="language-solidity">function updateSplit(
    address split,
    address[] calldata accounts,
    uint32[] calldata percentAllocations,
    uint32 distributorFee
) external;
</code></pre>
<h3 id="transfercontrol"><a class="header" href="#transfercontrol">transferControl</a></h3>
<pre><code class="language-solidity">function transferControl(address split, address newController) external;
</code></pre>
<h3 id="cancelcontroltransfer"><a class="header" href="#cancelcontroltransfer">cancelControlTransfer</a></h3>
<pre><code class="language-solidity">function cancelControlTransfer(address split) external;
</code></pre>
<h3 id="acceptcontrol"><a class="header" href="#acceptcontrol">acceptControl</a></h3>
<pre><code class="language-solidity">function acceptControl(address split) external;
</code></pre>
<h3 id="makesplitimmutable"><a class="header" href="#makesplitimmutable">makeSplitImmutable</a></h3>
<pre><code class="language-solidity">function makeSplitImmutable(address split) external;
</code></pre>
<h3 id="distributeeth"><a class="header" href="#distributeeth">distributeETH</a></h3>
<pre><code class="language-solidity">function distributeETH(
    address split,
    address[] calldata accounts,
    uint32[] calldata percentAllocations,
    uint32 distributorFee,
    address distributorAddress
) external;
</code></pre>
<h3 id="updateanddistributeeth"><a class="header" href="#updateanddistributeeth">updateAndDistributeETH</a></h3>
<pre><code class="language-solidity">function updateAndDistributeETH(
    address split,
    address[] calldata accounts,
    uint32[] calldata percentAllocations,
    uint32 distributorFee,
    address distributorAddress
) external;
</code></pre>
<h3 id="distributeerc20"><a class="header" href="#distributeerc20">distributeERC20</a></h3>
<pre><code class="language-solidity">function distributeERC20(
    address split,
    ERC20 token,
    address[] calldata accounts,
    uint32[] calldata percentAllocations,
    uint32 distributorFee,
    address distributorAddress
) external;
</code></pre>
<h3 id="updateanddistributeerc20"><a class="header" href="#updateanddistributeerc20">updateAndDistributeERC20</a></h3>
<pre><code class="language-solidity">function updateAndDistributeERC20(
    address split,
    ERC20 token,
    address[] calldata accounts,
    uint32[] calldata percentAllocations,
    uint32 distributorFee,
    address distributorAddress
) external;
</code></pre>
<h3 id="withdraw-1"><a class="header" href="#withdraw-1">withdraw</a></h3>
<pre><code class="language-solidity">function withdraw(address account, uint256 withdrawETH, ERC20[] calldata tokens)
    external;
</code></pre>
<h2 id="events-3"><a class="header" href="#events-3">Events</a></h2>
<h3 id="createsplit-1"><a class="header" href="#createsplit-1">CreateSplit</a></h3>
<p>EVENTS</p>
<p>emitted after each successful split creation</p>
<pre><code class="language-solidity">event CreateSplit(address indexed split);
</code></pre>
<h3 id="updatesplit-1"><a class="header" href="#updatesplit-1">UpdateSplit</a></h3>
<p>emitted after each successful split update</p>
<pre><code class="language-solidity">event UpdateSplit(address indexed split);
</code></pre>
<h3 id="initiatecontroltransfer"><a class="header" href="#initiatecontroltransfer">InitiateControlTransfer</a></h3>
<p>emitted after each initiated split control transfer</p>
<pre><code class="language-solidity">event InitiateControlTransfer(
    address indexed split, address indexed newPotentialController
);
</code></pre>
<h3 id="cancelcontroltransfer-1"><a class="header" href="#cancelcontroltransfer-1">CancelControlTransfer</a></h3>
<p>emitted after each canceled split control transfer</p>
<pre><code class="language-solidity">event CancelControlTransfer(address indexed split);
</code></pre>
<h3 id="controltransfer"><a class="header" href="#controltransfer">ControlTransfer</a></h3>
<p>emitted after each successful split control transfer</p>
<pre><code class="language-solidity">event ControlTransfer(
    address indexed split,
    address indexed previousController,
    address indexed newController
);
</code></pre>
<h3 id="distributeeth-1"><a class="header" href="#distributeeth-1">DistributeETH</a></h3>
<p>emitted after each successful ETH balance split</p>
<pre><code class="language-solidity">event DistributeETH(
    address indexed split, uint256 amount, address indexed distributorAddress
);
</code></pre>
<h3 id="distributeerc20-1"><a class="header" href="#distributeerc20-1">DistributeERC20</a></h3>
<p>emitted after each successful ERC20 balance split</p>
<pre><code class="language-solidity">event DistributeERC20(
    address indexed split,
    ERC20 indexed token,
    uint256 amount,
    address indexed distributorAddress
);
</code></pre>
<h3 id="withdrawal-1"><a class="header" href="#withdrawal-1">Withdrawal</a></h3>
<p>emitted after each successful withdrawal</p>
<pre><code class="language-solidity">event Withdrawal(
    address indexed account,
    uint256 ethAmount,
    ERC20[] tokens,
    uint256[] tokenAmounts
);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="unauthorized"><a class="header" href="#unauthorized">Unauthorized</a></h1>
<p><a href="https://github.com/sonastream/core/blob/7c2284c734e2c8a2224e94ea1880647f1e8a0962/contracts/payout/SplitMain.sol">Git Source</a></p>
<p>ERRORS</p>
<p>Unauthorized sender <code>sender</code></p>
<pre><code class="language-solidity">error Unauthorized(address sender);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="invalidsplit__toofewaccounts"><a class="header" href="#invalidsplit__toofewaccounts">InvalidSplit__TooFewAccounts</a></h1>
<p><a href="https://github.com/sonastream/core/blob/7c2284c734e2c8a2224e94ea1880647f1e8a0962/contracts/payout/SplitMain.sol">Git Source</a></p>
<p>Invalid number of accounts <code>accountsLength</code>, must have at least 2</p>
<pre><code class="language-solidity">error InvalidSplit__TooFewAccounts(uint256 accountsLength);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="invalidsplit__accountsandallocationsmismatch"><a class="header" href="#invalidsplit__accountsandallocationsmismatch">InvalidSplit__AccountsAndAllocationsMismatch</a></h1>
<p><a href="https://github.com/sonastream/core/blob/7c2284c734e2c8a2224e94ea1880647f1e8a0962/contracts/payout/SplitMain.sol">Git Source</a></p>
<p>Array lengths of accounts &amp; percentAllocations don't match (<code>accountsLength</code> != <code>allocationsLength</code>)</p>
<pre><code class="language-solidity">error InvalidSplit__AccountsAndAllocationsMismatch(
    uint256 accountsLength, uint256 allocationsLength
);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="invalidsplit__invalidallocationssum"><a class="header" href="#invalidsplit__invalidallocationssum">InvalidSplit__InvalidAllocationsSum</a></h1>
<p><a href="https://github.com/sonastream/core/blob/7c2284c734e2c8a2224e94ea1880647f1e8a0962/contracts/payout/SplitMain.sol">Git Source</a></p>
<p>Invalid percentAllocations sum <code>allocationsSum</code> must equal <code>PERCENTAGE_SCALE</code></p>
<pre><code class="language-solidity">error InvalidSplit__InvalidAllocationsSum(uint32 allocationsSum);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="invalidsplit__accountsoutoforder"><a class="header" href="#invalidsplit__accountsoutoforder">InvalidSplit__AccountsOutOfOrder</a></h1>
<p><a href="https://github.com/sonastream/core/blob/7c2284c734e2c8a2224e94ea1880647f1e8a0962/contracts/payout/SplitMain.sol">Git Source</a></p>
<p>Invalid accounts ordering at <code>index</code></p>
<pre><code class="language-solidity">error InvalidSplit__AccountsOutOfOrder(uint256 index);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="invalidsplit__allocationmustbepositive"><a class="header" href="#invalidsplit__allocationmustbepositive">InvalidSplit__AllocationMustBePositive</a></h1>
<p><a href="https://github.com/sonastream/core/blob/7c2284c734e2c8a2224e94ea1880647f1e8a0962/contracts/payout/SplitMain.sol">Git Source</a></p>
<p>Invalid percentAllocation of zero at <code>index</code></p>
<pre><code class="language-solidity">error InvalidSplit__AllocationMustBePositive(uint256 index);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="invalidsplit__invaliddistributorfee"><a class="header" href="#invalidsplit__invaliddistributorfee">InvalidSplit__InvalidDistributorFee</a></h1>
<p><a href="https://github.com/sonastream/core/blob/7c2284c734e2c8a2224e94ea1880647f1e8a0962/contracts/payout/SplitMain.sol">Git Source</a></p>
<p>Invalid distributorFee <code>distributorFee</code> cannot be greater than 10% (1e5)</p>
<pre><code class="language-solidity">error InvalidSplit__InvalidDistributorFee(uint32 distributorFee);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="invalidsplit__invalidhash"><a class="header" href="#invalidsplit__invalidhash">InvalidSplit__InvalidHash</a></h1>
<p><a href="https://github.com/sonastream/core/blob/7c2284c734e2c8a2224e94ea1880647f1e8a0962/contracts/payout/SplitMain.sol">Git Source</a></p>
<p>Invalid hash <code>hash</code> from split data (accounts, percentAllocations, distributorFee)</p>
<pre><code class="language-solidity">error InvalidSplit__InvalidHash(bytes32 hash);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="invalidnewcontroller"><a class="header" href="#invalidnewcontroller">InvalidNewController</a></h1>
<p><a href="https://github.com/sonastream/core/blob/7c2284c734e2c8a2224e94ea1880647f1e8a0962/contracts/payout/SplitMain.sol">Git Source</a></p>
<p>Invalid new controlling address <code>newController</code> for mutable split</p>
<pre><code class="language-solidity">error InvalidNewController(address newController);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="splitmain"><a class="header" href="#splitmain">SplitMain</a></h1>
<p><a href="https://github.com/sonastream/core/blob/7c2284c734e2c8a2224e94ea1880647f1e8a0962/contracts/payout/SplitMain.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="contracts/payout/SplitMain.sol//contracts/payout/interfaces/ISplitMain.sol/interface.ISplitMain.html">ISplitMain</a></p>
<p><strong>Author:</strong>
0xSplits <a href="mailto:contracts/payout/SplitMain.sol/will@0xSplits.xyz">will@0xSplits.xyz</a></p>
<p>A composable and gas-efficient protocol for deploying splitter contracts.</p>
<p><em>Split recipients, ownerships, and keeper fees are stored onchain as calldata &amp; re-passed as args / validated
via hashing when needed. Each split gets its own address &amp; proxy for maximum composability with other contracts onchain.
For these proxies, we extended EIP-1167 Minimal Proxy Contract to avoid <code>DELEGATECALL</code> inside <code>receive()</code> to accept
hard gas-capped <code>sends</code> &amp; <code>transfers</code>.</em></p>
<h2 id="state-variables-2"><a class="header" href="#state-variables-2">State Variables</a></h2>
<h3 id="percentage_scale"><a class="header" href="#percentage_scale">PERCENTAGE_SCALE</a></h3>
<p>constant to scale uints into percentages (1e6 == 100%)</p>
<pre><code class="language-solidity">uint256 public constant PERCENTAGE_SCALE = 1e6;
</code></pre>
<h3 id="_max_distributor_fee"><a class="header" href="#_max_distributor_fee">_MAX_DISTRIBUTOR_FEE</a></h3>
<p>maximum distributor fee; 1e5 = 10%/// PERCENTAGE_SCALE</p>
<pre><code class="language-solidity">uint256 internal constant _MAX_DISTRIBUTOR_FEE = 1e5;
</code></pre>
<h3 id="walletimplementation-1"><a class="header" href="#walletimplementation-1">walletImplementation</a></h3>
<p>address of wallet implementation for split proxies</p>
<pre><code class="language-solidity">address public immutable override walletImplementation;
</code></pre>
<h3 id="_ethbalances"><a class="header" href="#_ethbalances">_ethBalances</a></h3>
<p>mapping to account ETH balances</p>
<pre><code class="language-solidity">mapping(address =&gt; uint256) internal _ethBalances;
</code></pre>
<h3 id="_erc20balances"><a class="header" href="#_erc20balances">_erc20Balances</a></h3>
<p>mapping to account ERC20 balances</p>
<pre><code class="language-solidity">mapping(ERC20 =&gt; mapping(address =&gt; uint256)) internal _erc20Balances;
</code></pre>
<h3 id="_splits"><a class="header" href="#_splits">_splits</a></h3>
<p>mapping to Split metadata</p>
<pre><code class="language-solidity">mapping(address =&gt; Split) internal _splits;
</code></pre>
<h2 id="functions-7"><a class="header" href="#functions-7">Functions</a></h2>
<h3 id="onlysplitcontroller"><a class="header" href="#onlysplitcontroller">onlySplitController</a></h3>
<p>Reverts if the sender doesn't own the split <code>split</code></p>
<pre><code class="language-solidity">modifier onlySplitController(address split);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>split</code></td><td><code>address</code></td><td>Address to check for control</td></tr>
</tbody></table>
</div>
<h3 id="onlysplitnewpotentialcontroller"><a class="header" href="#onlysplitnewpotentialcontroller">onlySplitNewPotentialController</a></h3>
<p>Reverts if the sender isn't the new potential controller of split <code>split</code></p>
<pre><code class="language-solidity">modifier onlySplitNewPotentialController(address split);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>split</code></td><td><code>address</code></td><td>Address to check for new potential control</td></tr>
</tbody></table>
</div>
<h3 id="validsplit"><a class="header" href="#validsplit">validSplit</a></h3>
<p>Reverts if the split with recipients represented by <code>accounts</code> and <code>percentAllocations</code> is malformed</p>
<pre><code class="language-solidity">modifier validSplit(
    address[] memory accounts,
    uint32[] memory percentAllocations,
    uint32 distributorFee
);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>accounts</code></td><td><code>address[]</code></td><td>Ordered, unique list of addresses with ownership in the split</td></tr>
<tr><td><code>percentAllocations</code></td><td><code>uint32[]</code></td><td>Percent allocations associated with each address</td></tr>
<tr><td><code>distributorFee</code></td><td><code>uint32</code></td><td>Keeper fee paid by split to cover gas costs of distribution</td></tr>
</tbody></table>
</div>
<h3 id="validnewcontroller"><a class="header" href="#validnewcontroller">validNewController</a></h3>
<p>Reverts if <code>newController</code> is the zero address</p>
<pre><code class="language-solidity">modifier validNewController(address newController);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>newController</code></td><td><code>address</code></td><td>Proposed new controlling address</td></tr>
</tbody></table>
</div>
<h3 id="constructor"><a class="header" href="#constructor">constructor</a></h3>
<pre><code class="language-solidity">constructor();
</code></pre>
<h3 id="receive"><a class="header" href="#receive">receive</a></h3>
<p>Receive ETH</p>
<p><em>Used by split proxies in <code>distributeETH</code> to transfer ETH to <code>SplitMain</code>
Funds sent outside of <code>distributeETH</code> will be unrecoverable</em></p>
<pre><code class="language-solidity">receive() external payable;
</code></pre>
<h3 id="createsplit-2"><a class="header" href="#createsplit-2">createSplit</a></h3>
<p>Creates a new split with recipients <code>accounts</code> with ownerships <code>percentAllocations</code>, a keeper fee for splitting of <code>distributorFee</code> and the controlling address <code>controller</code></p>
<pre><code class="language-solidity">function createSplit(
    address[] calldata accounts,
    uint32[] calldata percentAllocations,
    uint32 distributorFee,
    address controller
)
    external
    override
    validSplit(accounts, percentAllocations, distributorFee)
    returns (address split);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>accounts</code></td><td><code>address[]</code></td><td>Ordered, unique list of addresses with ownership in the split</td></tr>
<tr><td><code>percentAllocations</code></td><td><code>uint32[]</code></td><td>Percent allocations associated with each address</td></tr>
<tr><td><code>distributorFee</code></td><td><code>uint32</code></td><td>Keeper fee paid by split to cover gas costs of distribution</td></tr>
<tr><td><code>controller</code></td><td><code>address</code></td><td>Controlling address (0x0 if immutable)</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>split</code></td><td><code>address</code></td><td>Address of newly created split</td></tr>
</tbody></table>
</div>
<h3 id="predictimmutablesplitaddress-1"><a class="header" href="#predictimmutablesplitaddress-1">predictImmutableSplitAddress</a></h3>
<p>Predicts the address for an immutable split created with recipients <code>accounts</code> with ownerships <code>percentAllocations</code> and a keeper fee for splitting of <code>distributorFee</code></p>
<pre><code class="language-solidity">function predictImmutableSplitAddress(
    address[] calldata accounts,
    uint32[] calldata percentAllocations,
    uint32 distributorFee
)
    external
    view
    override
    validSplit(accounts, percentAllocations, distributorFee)
    returns (address split);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>accounts</code></td><td><code>address[]</code></td><td>Ordered, unique list of addresses with ownership in the split</td></tr>
<tr><td><code>percentAllocations</code></td><td><code>uint32[]</code></td><td>Percent allocations associated with each address</td></tr>
<tr><td><code>distributorFee</code></td><td><code>uint32</code></td><td>Keeper fee paid by split to cover gas costs of distribution</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>split</code></td><td><code>address</code></td><td>Predicted address of such an immutable split</td></tr>
</tbody></table>
</div>
<h3 id="updatesplit-2"><a class="header" href="#updatesplit-2">updateSplit</a></h3>
<p>Updates an existing split with recipients <code>accounts</code> with ownerships <code>percentAllocations</code> and a keeper fee for splitting of <code>distributorFee</code></p>
<pre><code class="language-solidity">function updateSplit(
    address split,
    address[] calldata accounts,
    uint32[] calldata percentAllocations,
    uint32 distributorFee
)
    external
    override
    onlySplitController(split)
    validSplit(accounts, percentAllocations, distributorFee);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>split</code></td><td><code>address</code></td><td>Address of mutable split to update</td></tr>
<tr><td><code>accounts</code></td><td><code>address[]</code></td><td>Ordered, unique list of addresses with ownership in the split</td></tr>
<tr><td><code>percentAllocations</code></td><td><code>uint32[]</code></td><td>Percent allocations associated with each address</td></tr>
<tr><td><code>distributorFee</code></td><td><code>uint32</code></td><td>Keeper fee paid by split to cover gas costs of distribution</td></tr>
</tbody></table>
</div>
<h3 id="transfercontrol-1"><a class="header" href="#transfercontrol-1">transferControl</a></h3>
<p>Begins transfer of the controlling address of mutable split <code>split</code> to <code>newController</code></p>
<p><em>Two-step control transfer inspired by <a href="https://github.com/dharma-eng/dharma-smart-wallet/blob/master/contracts/helpers/TwoStepOwnable.sol">dharma</a></em></p>
<pre><code class="language-solidity">function transferControl(address split, address newController)
    external
    override
    onlySplitController(split)
    validNewController(newController);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>split</code></td><td><code>address</code></td><td>Address of mutable split to transfer control for</td></tr>
<tr><td><code>newController</code></td><td><code>address</code></td><td>Address to begin transferring control to</td></tr>
</tbody></table>
</div>
<h3 id="cancelcontroltransfer-2"><a class="header" href="#cancelcontroltransfer-2">cancelControlTransfer</a></h3>
<p>Cancels transfer of the controlling address of mutable split <code>split</code></p>
<pre><code class="language-solidity">function cancelControlTransfer(address split)
    external
    override
    onlySplitController(split);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>split</code></td><td><code>address</code></td><td>Address of mutable split to cancel control transfer for</td></tr>
</tbody></table>
</div>
<h3 id="acceptcontrol-1"><a class="header" href="#acceptcontrol-1">acceptControl</a></h3>
<p>Accepts transfer of the controlling address of mutable split <code>split</code></p>
<pre><code class="language-solidity">function acceptControl(address split)
    external
    override
    onlySplitNewPotentialController(split);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>split</code></td><td><code>address</code></td><td>Address of mutable split to accept control transfer for</td></tr>
</tbody></table>
</div>
<h3 id="makesplitimmutable-1"><a class="header" href="#makesplitimmutable-1">makeSplitImmutable</a></h3>
<p>Turns mutable split <code>split</code> immutable</p>
<pre><code class="language-solidity">function makeSplitImmutable(address split)
    external
    override
    onlySplitController(split);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>split</code></td><td><code>address</code></td><td>Address of mutable split to turn immutable</td></tr>
</tbody></table>
</div>
<h3 id="distributeeth-2"><a class="header" href="#distributeeth-2">distributeETH</a></h3>
<p>Distributes the ETH balance for split <code>split</code></p>
<p><em><code>accounts</code>, <code>percentAllocations</code>, and <code>distributorFee</code> are verified by hashing
&amp; comparing to the hash in storage associated with split <code>split</code></em></p>
<pre><code class="language-solidity">function distributeETH(
    address split,
    address[] calldata accounts,
    uint32[] calldata percentAllocations,
    uint32 distributorFee,
    address distributorAddress
) external override validSplit(accounts, percentAllocations, distributorFee);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>split</code></td><td><code>address</code></td><td>Address of split to distribute balance for</td></tr>
<tr><td><code>accounts</code></td><td><code>address[]</code></td><td>Ordered, unique list of addresses with ownership in the split</td></tr>
<tr><td><code>percentAllocations</code></td><td><code>uint32[]</code></td><td>Percent allocations associated with each address</td></tr>
<tr><td><code>distributorFee</code></td><td><code>uint32</code></td><td>Keeper fee paid by split to cover gas costs of distribution</td></tr>
<tr><td><code>distributorAddress</code></td><td><code>address</code></td><td>Address to pay <code>distributorFee</code> to</td></tr>
</tbody></table>
</div>
<h3 id="updateanddistributeeth-1"><a class="header" href="#updateanddistributeeth-1">updateAndDistributeETH</a></h3>
<p>Updates &amp; distributes the ETH balance for split <code>split</code></p>
<p><em>only callable by SplitController</em></p>
<pre><code class="language-solidity">function updateAndDistributeETH(
    address split,
    address[] calldata accounts,
    uint32[] calldata percentAllocations,
    uint32 distributorFee,
    address distributorAddress
)
    external
    override
    onlySplitController(split)
    validSplit(accounts, percentAllocations, distributorFee);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>split</code></td><td><code>address</code></td><td>Address of split to distribute balance for</td></tr>
<tr><td><code>accounts</code></td><td><code>address[]</code></td><td>Ordered, unique list of addresses with ownership in the split</td></tr>
<tr><td><code>percentAllocations</code></td><td><code>uint32[]</code></td><td>Percent allocations associated with each address</td></tr>
<tr><td><code>distributorFee</code></td><td><code>uint32</code></td><td>Keeper fee paid by split to cover gas costs of distribution</td></tr>
<tr><td><code>distributorAddress</code></td><td><code>address</code></td><td>Address to pay <code>distributorFee</code> to</td></tr>
</tbody></table>
</div>
<h3 id="distributeerc20-2"><a class="header" href="#distributeerc20-2">distributeERC20</a></h3>
<p>Distributes the ERC20 <code>token</code> balance for split <code>split</code></p>
<p><em><code>accounts</code>, <code>percentAllocations</code>, and <code>distributorFee</code> are verified by hashing
&amp; comparing to the hash in storage associated with split <code>split</code></em></p>
<p><em>pernicious ERC20s may cause overflow in this function inside
_scaleAmountByPercentage, but results do not affect ETH &amp; other ERC20 balances</em></p>
<pre><code class="language-solidity">function distributeERC20(
    address split,
    ERC20 token,
    address[] calldata accounts,
    uint32[] calldata percentAllocations,
    uint32 distributorFee,
    address distributorAddress
) external override validSplit(accounts, percentAllocations, distributorFee);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>split</code></td><td><code>address</code></td><td>Address of split to distribute balance for</td></tr>
<tr><td><code>token</code></td><td><code>ERC20</code></td><td>Address of ERC20 to distribute balance for</td></tr>
<tr><td><code>accounts</code></td><td><code>address[]</code></td><td>Ordered, unique list of addresses with ownership in the split</td></tr>
<tr><td><code>percentAllocations</code></td><td><code>uint32[]</code></td><td>Percent allocations associated with each address</td></tr>
<tr><td><code>distributorFee</code></td><td><code>uint32</code></td><td>Keeper fee paid by split to cover gas costs of distribution</td></tr>
<tr><td><code>distributorAddress</code></td><td><code>address</code></td><td>Address to pay <code>distributorFee</code> to</td></tr>
</tbody></table>
</div>
<h3 id="updateanddistributeerc20-1"><a class="header" href="#updateanddistributeerc20-1">updateAndDistributeERC20</a></h3>
<p>Updates &amp; distributes the ERC20 <code>token</code> balance for split <code>split</code></p>
<p><em>only callable by SplitController</em></p>
<p><em>pernicious ERC20s may cause overflow in this function inside
_scaleAmountByPercentage, but results do not affect ETH &amp; other ERC20 balances</em></p>
<pre><code class="language-solidity">function updateAndDistributeERC20(
    address split,
    ERC20 token,
    address[] calldata accounts,
    uint32[] calldata percentAllocations,
    uint32 distributorFee,
    address distributorAddress
)
    external
    override
    onlySplitController(split)
    validSplit(accounts, percentAllocations, distributorFee);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>split</code></td><td><code>address</code></td><td>Address of split to distribute balance for</td></tr>
<tr><td><code>token</code></td><td><code>ERC20</code></td><td>Address of ERC20 to distribute balance for</td></tr>
<tr><td><code>accounts</code></td><td><code>address[]</code></td><td>Ordered, unique list of addresses with ownership in the split</td></tr>
<tr><td><code>percentAllocations</code></td><td><code>uint32[]</code></td><td>Percent allocations associated with each address</td></tr>
<tr><td><code>distributorFee</code></td><td><code>uint32</code></td><td>Keeper fee paid by split to cover gas costs of distribution</td></tr>
<tr><td><code>distributorAddress</code></td><td><code>address</code></td><td>Address to pay <code>distributorFee</code> to</td></tr>
</tbody></table>
</div>
<h3 id="withdraw-2"><a class="header" href="#withdraw-2">withdraw</a></h3>
<p>Withdraw ETH &amp;/ ERC20 balances for account <code>account</code></p>
<pre><code class="language-solidity">function withdraw(address account, uint256 withdrawETH, ERC20[] calldata tokens)
    external
    override;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>account</code></td><td><code>address</code></td><td>Address to withdraw on behalf of</td></tr>
<tr><td><code>withdrawETH</code></td><td><code>uint256</code></td><td>Withdraw all ETH if nonzero</td></tr>
<tr><td><code>tokens</code></td><td><code>ERC20[]</code></td><td>Addresses of ERC20s to withdraw</td></tr>
</tbody></table>
</div>
<h3 id="gethash"><a class="header" href="#gethash">getHash</a></h3>
<p>FUNCTIONS - VIEWS</p>
<p>Returns the current hash of split <code>split</code></p>
<pre><code class="language-solidity">function getHash(address split) external view returns (bytes32);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>split</code></td><td><code>address</code></td><td>Split to return hash for</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bytes32</code></td><td>Split's hash</td></tr>
</tbody></table>
</div>
<h3 id="getcontroller"><a class="header" href="#getcontroller">getController</a></h3>
<p>Returns the current controller of split <code>split</code></p>
<pre><code class="language-solidity">function getController(address split) external view returns (address);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>split</code></td><td><code>address</code></td><td>Split to return controller for</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>Split's controller</td></tr>
</tbody></table>
</div>
<h3 id="getnewpotentialcontroller"><a class="header" href="#getnewpotentialcontroller">getNewPotentialController</a></h3>
<p>Returns the current newPotentialController of split <code>split</code></p>
<pre><code class="language-solidity">function getNewPotentialController(address split)
    external
    view
    returns (address);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>split</code></td><td><code>address</code></td><td>Split to return newPotentialController for</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>Split's newPotentialController</td></tr>
</tbody></table>
</div>
<h3 id="getethbalance"><a class="header" href="#getethbalance">getETHBalance</a></h3>
<p>Returns the current ETH balance of account <code>account</code></p>
<pre><code class="language-solidity">function getETHBalance(address account) external view returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>account</code></td><td><code>address</code></td><td>Account to return ETH balance for</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>Account's balance of ETH</td></tr>
</tbody></table>
</div>
<h3 id="geterc20balance"><a class="header" href="#geterc20balance">getERC20Balance</a></h3>
<p>Returns the ERC20 balance of token <code>token</code> for account <code>account</code></p>
<pre><code class="language-solidity">function getERC20Balance(address account, ERC20 token)
    external
    view
    returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>account</code></td><td><code>address</code></td><td>Account to return ERC20 <code>token</code> balance for</td></tr>
<tr><td><code>token</code></td><td><code>ERC20</code></td><td>Token to return balance for</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>Account's balance of <code>token</code></td></tr>
</tbody></table>
</div>
<h3 id="_getsum"><a class="header" href="#_getsum">_getSum</a></h3>
<p>FUNCTIONS - PRIVATE &amp; INTERNAL</p>
<p>Sums array of uint32s</p>
<pre><code class="language-solidity">function _getSum(uint32[] memory numbers) internal pure returns (uint32 sum);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>numbers</code></td><td><code>uint32[]</code></td><td>Array of uint32s to sum</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>sum</code></td><td><code>uint32</code></td><td>Sum of <code>numbers</code>.</td></tr>
</tbody></table>
</div>
<h3 id="_hashsplit"><a class="header" href="#_hashsplit">_hashSplit</a></h3>
<p>Hashes a split</p>
<pre><code class="language-solidity">function _hashSplit(
    address[] memory accounts,
    uint32[] memory percentAllocations,
    uint32 distributorFee
) internal pure returns (bytes32);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>accounts</code></td><td><code>address[]</code></td><td>Ordered, unique list of addresses with ownership in the split</td></tr>
<tr><td><code>percentAllocations</code></td><td><code>uint32[]</code></td><td>Percent allocations associated with each address</td></tr>
<tr><td><code>distributorFee</code></td><td><code>uint32</code></td><td>Keeper fee paid by split to cover gas costs of distribution</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bytes32</code></td><td>computedHash Hash of the split.</td></tr>
</tbody></table>
</div>
<h3 id="_updatesplit"><a class="header" href="#_updatesplit">_updateSplit</a></h3>
<p>Updates an existing split with recipients <code>accounts</code> with ownerships <code>percentAllocations</code> and a keeper fee for splitting of <code>distributorFee</code></p>
<pre><code class="language-solidity">function _updateSplit(
    address split,
    address[] calldata accounts,
    uint32[] calldata percentAllocations,
    uint32 distributorFee
) internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>split</code></td><td><code>address</code></td><td>Address of mutable split to update</td></tr>
<tr><td><code>accounts</code></td><td><code>address[]</code></td><td>Ordered, unique list of addresses with ownership in the split</td></tr>
<tr><td><code>percentAllocations</code></td><td><code>uint32[]</code></td><td>Percent allocations associated with each address</td></tr>
<tr><td><code>distributorFee</code></td><td><code>uint32</code></td><td>Keeper fee paid by split to cover gas costs of distribution</td></tr>
</tbody></table>
</div>
<h3 id="_validsplithash"><a class="header" href="#_validsplithash">_validSplitHash</a></h3>
<p>Checks hash from <code>accounts</code>, <code>percentAllocations</code>, and <code>distributorFee</code> against the hash stored for <code>split</code></p>
<pre><code class="language-solidity">function _validSplitHash(
    address split,
    address[] memory accounts,
    uint32[] memory percentAllocations,
    uint32 distributorFee
) internal view;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>split</code></td><td><code>address</code></td><td>Address of hash to check</td></tr>
<tr><td><code>accounts</code></td><td><code>address[]</code></td><td>Ordered, unique list of addresses with ownership in the split</td></tr>
<tr><td><code>percentAllocations</code></td><td><code>uint32[]</code></td><td>Percent allocations associated with each address</td></tr>
<tr><td><code>distributorFee</code></td><td><code>uint32</code></td><td>Keeper fee paid by split to cover gas costs of distribution</td></tr>
</tbody></table>
</div>
<h3 id="_distributeeth"><a class="header" href="#_distributeeth">_distributeETH</a></h3>
<p>Distributes the ETH balance for split <code>split</code></p>
<p><em><code>accounts</code>, <code>percentAllocations</code>, and <code>distributorFee</code> must be verified before calling</em></p>
<pre><code class="language-solidity">function _distributeETH(
    address split,
    address[] memory accounts,
    uint32[] memory percentAllocations,
    uint32 distributorFee,
    address distributorAddress
) internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>split</code></td><td><code>address</code></td><td>Address of split to distribute balance for</td></tr>
<tr><td><code>accounts</code></td><td><code>address[]</code></td><td>Ordered, unique list of addresses with ownership in the split</td></tr>
<tr><td><code>percentAllocations</code></td><td><code>uint32[]</code></td><td>Percent allocations associated with each address</td></tr>
<tr><td><code>distributorFee</code></td><td><code>uint32</code></td><td>Keeper fee paid by split to cover gas costs of distribution</td></tr>
<tr><td><code>distributorAddress</code></td><td><code>address</code></td><td>Address to pay <code>distributorFee</code> to</td></tr>
</tbody></table>
</div>
<h3 id="_distributeerc20"><a class="header" href="#_distributeerc20">_distributeERC20</a></h3>
<p>Distributes the ERC20 <code>token</code> balance for split <code>split</code></p>
<p><em><code>accounts</code>, <code>percentAllocations</code>, and <code>distributorFee</code> must be verified before calling</em></p>
<p><em>pernicious ERC20s may cause overflow in this function inside
_scaleAmountByPercentage, but results do not affect ETH &amp; other ERC20 balances</em></p>
<pre><code class="language-solidity">function _distributeERC20(
    address split,
    ERC20 token,
    address[] memory accounts,
    uint32[] memory percentAllocations,
    uint32 distributorFee,
    address distributorAddress
) internal;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>split</code></td><td><code>address</code></td><td>Address of split to distribute balance for</td></tr>
<tr><td><code>token</code></td><td><code>ERC20</code></td><td>Address of ERC20 to distribute balance for</td></tr>
<tr><td><code>accounts</code></td><td><code>address[]</code></td><td>Ordered, unique list of addresses with ownership in the split</td></tr>
<tr><td><code>percentAllocations</code></td><td><code>uint32[]</code></td><td>Percent allocations associated with each address</td></tr>
<tr><td><code>distributorFee</code></td><td><code>uint32</code></td><td>Keeper fee paid by split to cover gas costs of distribution</td></tr>
<tr><td><code>distributorAddress</code></td><td><code>address</code></td><td>Address to pay <code>distributorFee</code> to</td></tr>
</tbody></table>
</div>
<h3 id="_scaleamountbypercentage"><a class="header" href="#_scaleamountbypercentage">_scaleAmountByPercentage</a></h3>
<p>Multiplies an amount by a scaled percentage</p>
<pre><code class="language-solidity">function _scaleAmountByPercentage(uint256 amount, uint256 scaledPercent)
    internal
    pure
    returns (uint256 scaledAmount);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>Amount to get <code>scaledPercentage</code> of</td></tr>
<tr><td><code>scaledPercent</code></td><td><code>uint256</code></td><td>Percent scaled by PERCENTAGE_SCALE</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>scaledAmount</code></td><td><code>uint256</code></td><td>Percent of <code>amount</code>.</td></tr>
</tbody></table>
</div>
<h3 id="_withdraw"><a class="header" href="#_withdraw">_withdraw</a></h3>
<p>Withdraw ETH for account <code>account</code></p>
<pre><code class="language-solidity">function _withdraw(address account) internal returns (uint256 withdrawn);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>account</code></td><td><code>address</code></td><td>Account to withdrawn ETH for</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>withdrawn</code></td><td><code>uint256</code></td><td>Amount of ETH withdrawn</td></tr>
</tbody></table>
</div>
<h3 id="_withdrawerc20"><a class="header" href="#_withdrawerc20">_withdrawERC20</a></h3>
<p>Withdraw ERC20 <code>token</code> for account <code>account</code></p>
<pre><code class="language-solidity">function _withdrawERC20(address account, ERC20 token)
    internal
    returns (uint256 withdrawn);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>account</code></td><td><code>address</code></td><td>Account to withdrawn ERC20 <code>token</code> for</td></tr>
<tr><td><code>token</code></td><td><code>ERC20</code></td><td></td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>withdrawn</code></td><td><code>uint256</code></td><td>Amount of ERC20 <code>token</code> withdrawn</td></tr>
</tbody></table>
</div>
<h2 id="structs-2"><a class="header" href="#structs-2">Structs</a></h2>
<h3 id="split"><a class="header" href="#split">Split</a></h3>
<p>holds Split metadata</p>
<pre><code class="language-solidity">struct Split {
    bytes32 hash;
    address controller;
    address newPotentialController;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="unauthorized-1"><a class="header" href="#unauthorized-1">Unauthorized</a></h1>
<p><a href="https://github.com/sonastream/core/blob/7c2284c734e2c8a2224e94ea1880647f1e8a0962/contracts/payout/SplitWallet.sol">Git Source</a></p>
<p>ERRORS</p>
<p>Unauthorized sender</p>
<pre><code class="language-solidity">error Unauthorized();
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="splitwallet"><a class="header" href="#splitwallet">SplitWallet</a></h1>
<p><a href="https://github.com/sonastream/core/blob/7c2284c734e2c8a2224e94ea1880647f1e8a0962/contracts/payout/SplitWallet.sol">Git Source</a></p>
<p><strong>Author:</strong>
0xSplits <a href="mailto:contracts/payout/SplitWallet.sol/will@0xSplits.xyz">will@0xSplits.xyz</a></p>
<p>The implementation logic for <code>SplitProxy</code>.</p>
<p><em><code>SplitProxy</code> handles <code>receive()</code> itself to avoid the gas cost with <code>DELEGATECALL</code>.</em></p>
<h2 id="state-variables-3"><a class="header" href="#state-variables-3">State Variables</a></h2>
<h3 id="splitmain-1"><a class="header" href="#splitmain-1">splitMain</a></h3>
<p>STORAGE
STORAGE - CONSTANTS &amp; IMMUTABLES</p>
<p>address of SplitMain for split distributions &amp; EOA/SC withdrawals</p>
<pre><code class="language-solidity">ISplitMain public immutable splitMain;
</code></pre>
<h2 id="functions-8"><a class="header" href="#functions-8">Functions</a></h2>
<h3 id="onlysplitmain"><a class="header" href="#onlysplitmain">onlySplitMain</a></h3>
<p>MODIFIERS</p>
<p>Reverts if the sender isn't SplitMain</p>
<pre><code class="language-solidity">modifier onlySplitMain();
</code></pre>
<h3 id="constructor-1"><a class="header" href="#constructor-1">constructor</a></h3>
<p>CONSTRUCTOR</p>
<pre><code class="language-solidity">constructor();
</code></pre>
<h3 id="sendethtomain"><a class="header" href="#sendethtomain">sendETHToMain</a></h3>
<p>FUNCTIONS - PUBLIC &amp; EXTERNAL</p>
<p>Sends amount <code>amount</code> of ETH in proxy to SplitMain</p>
<p><em>payable reduces gas cost; no vulnerability to accidentally lock
ETH introduced since fn call is restricted to SplitMain</em></p>
<pre><code class="language-solidity">function sendETHToMain(uint256 amount) external payable onlySplitMain;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>Amount to send</td></tr>
</tbody></table>
</div>
<h3 id="senderc20tomain"><a class="header" href="#senderc20tomain">sendERC20ToMain</a></h3>
<p>Sends amount <code>amount</code> of ERC20 <code>token</code> in proxy to SplitMain</p>
<p><em>payable reduces gas cost; no vulnerability to accidentally lock
ETH introduced since fn call is restricted to SplitMain</em></p>
<pre><code class="language-solidity">function sendERC20ToMain(ERC20 token, uint256 amount)
    external
    payable
    onlySplitMain;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>token</code></td><td><code>ERC20</code></td><td>Token to send</td></tr>
<tr><td><code>amount</code></td><td><code>uint256</code></td><td>Amount to send</td></tr>
</tbody></table>
</div>
<h2 id="events-4"><a class="header" href="#events-4">Events</a></h2>
<h3 id="receiveeth"><a class="header" href="#receiveeth">ReceiveETH</a></h3>
<p>EVENTS</p>
<p>emitted after each successful ETH transfer to proxy</p>
<pre><code class="language-solidity">event ReceiveETH(address indexed split, uint256 amount);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-4"><a class="header" href="#contents-4">Contents</a></h1>
<ul>
<li><a href="contracts/test//contracts/test/access">access</a></li>
<li><a href="contracts/test//contracts/test/mock">mock</a></li>
<li><a href="contracts/test/SonaReserveAuction.t.sol/contract.SonaReserveAuctionTest.html">SonaReserveAuctionTest</a></li>
<li><a href="contracts/test/SonaRewardToken.t.sol/contract.SonaRewardTokenTest.html">SonaRewardTokenTest</a></li>
<li><a href="contracts/test/SonaRewards.t.sol/contract.SonaTestRewards.html">SonaTestRewards</a></li>
<li><a href="contracts/test/Util.sol/contract.Util.html">Util</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-5"><a class="header" href="#contents-5">Contents</a></h1>
<ul>
<li><a href="contracts/test/access/SonaAdmin.t.sol/contract.SonaAdminTest.html">SonaAdminTest</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sonaadmintest"><a class="header" href="#sonaadmintest">SonaAdminTest</a></h1>
<p><a href="https://github.com/sonastream/core/blob/7c2284c734e2c8a2224e94ea1880647f1e8a0962/contracts/test/access/SonaAdmin.t.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="contracts/test/access/SonaAdmin.t.sol//contracts/test/Util.sol/contract.Util.html">Util</a>, <a href="contracts/test/access/SonaAdmin.t.sol//contracts/access/SonaAdmin.sol/contract.SonaAdmin.html">SonaAdmin</a></p>
<h2 id="functions-9"><a class="header" href="#functions-9">Functions</a></h2>
<h3 id="test_issonaadmin"><a class="header" href="#test_issonaadmin">test_isSonaAdmin</a></h3>
<pre><code class="language-solidity">function test_isSonaAdmin() public view;
</code></pre>
<h3 id="testfail_notallowedtograntadmin"><a class="header" href="#testfail_notallowedtograntadmin">testFail_notAllowedToGrantAdmin</a></h3>
<pre><code class="language-solidity">function testFail_notAllowedToGrantAdmin() public;
</code></pre>
<h3 id="testfail_notallowedtorevokeadmin"><a class="header" href="#testfail_notallowedtorevokeadmin">testFail_notAllowedToRevokeAdmin</a></h3>
<pre><code class="language-solidity">function testFail_notAllowedToRevokeAdmin() public;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-6"><a class="header" href="#contents-6">Contents</a></h1>
<ul>
<li><a href="contracts/test/mock/ContractBidderMock.sol/contract.ContractBidderMock.html">ContractBidderMock</a></li>
<li><a href="contracts/test/mock/ERC20Mock.sol/contract.ERC20ReturnTrueMock.html">ERC20ReturnTrueMock</a></li>
<li><a href="contracts/test/mock/ERC20Mock.sol/contract.ERC20ReturnFalseMock.html">ERC20ReturnFalseMock</a></li>
<li><a href="contracts/test/mock/ERC20Mock.sol/contract.ERC20NoReturnMock.html">ERC20NoReturnMock</a></li>
<li><a href="contracts/test/mock/RewardTokenMock.sol/contract.RewardTokenMock.html">RewardTokenMock</a></li>
<li><a href="contracts/test/mock/Weth9Mock.sol/contract.Weth9Mock.html">Weth9Mock</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contractbiddermock"><a class="header" href="#contractbiddermock">ContractBidderMock</a></h1>
<p><a href="https://github.com/sonastream/core/blob/7c2284c734e2c8a2224e94ea1880647f1e8a0962/contracts/test/mock/ContractBidderMock.sol">Git Source</a></p>
<h2 id="state-variables-4"><a class="header" href="#state-variables-4">State Variables</a></h2>
<h3 id="auction-1"><a class="header" href="#auction-1">auction</a></h3>
<pre><code class="language-solidity">ISonaReserveAuction public auction;
</code></pre>
<h3 id="canreceivefunds"><a class="header" href="#canreceivefunds">canReceiveFunds</a></h3>
<pre><code class="language-solidity">bool public canReceiveFunds;
</code></pre>
<h2 id="functions-10"><a class="header" href="#functions-10">Functions</a></h2>
<h3 id="constructor-2"><a class="header" href="#constructor-2">constructor</a></h3>
<pre><code class="language-solidity">constructor(ISonaReserveAuction auction_);
</code></pre>
<h3 id="createethbid"><a class="header" href="#createethbid">createETHBid</a></h3>
<pre><code class="language-solidity">function createETHBid(uint256 _tokenId, uint256 _ethBidAmount)
    external
    payable;
</code></pre>
<h3 id="fallback"><a class="header" href="#fallback">fallback</a></h3>
<pre><code class="language-solidity">fallback() external payable;
</code></pre>
<h3 id="receive-1"><a class="header" href="#receive-1">receive</a></h3>
<pre><code class="language-solidity">receive() external payable;
</code></pre>
<h3 id="disablereceiving"><a class="header" href="#disablereceiving">disableReceiving</a></h3>
<pre><code class="language-solidity">function disableReceiving() external;
</code></pre>
<h2 id="errors-2"><a class="header" href="#errors-2">Errors</a></h2>
<h3 id="cannotreceiveether"><a class="header" href="#cannotreceiveether">CannotReceiveEther</a></h3>
<pre><code class="language-solidity">error CannotReceiveEther();
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="erc20returntruemock"><a class="header" href="#erc20returntruemock">ERC20ReturnTrueMock</a></h1>
<p><a href="https://github.com/sonastream/core/blob/7c2284c734e2c8a2224e94ea1880647f1e8a0962/contracts/test/mock/ERC20Mock.sol">Git Source</a></p>
<h2 id="state-variables-5"><a class="header" href="#state-variables-5">State Variables</a></h2>
<h3 id="balanceof"><a class="header" href="#balanceof">balanceOf</a></h3>
<pre><code class="language-solidity">mapping(address =&gt; uint256) public balanceOf;
</code></pre>
<h3 id="allowance"><a class="header" href="#allowance">allowance</a></h3>
<pre><code class="language-solidity">mapping(address =&gt; mapping(address =&gt; uint256)) public allowance;
</code></pre>
<h2 id="functions-11"><a class="header" href="#functions-11">Functions</a></h2>
<h3 id="transfer"><a class="header" href="#transfer">transfer</a></h3>
<pre><code class="language-solidity">function transfer(address to, uint256 amount) public returns (bool);
</code></pre>
<h3 id="transferfrom"><a class="header" href="#transferfrom">transferFrom</a></h3>
<pre><code class="language-solidity">function transferFrom(address from, address to, uint256 amount)
    public
    returns (bool);
</code></pre>
<h2 id="events-5"><a class="header" href="#events-5">Events</a></h2>
<h3 id="transfer-1"><a class="header" href="#transfer-1">Transfer</a></h3>
<pre><code class="language-solidity">event Transfer(address indexed from, address indexed to, uint256 value);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="erc20returnfalsemock"><a class="header" href="#erc20returnfalsemock">ERC20ReturnFalseMock</a></h1>
<p><a href="https://github.com/sonastream/core/blob/7c2284c734e2c8a2224e94ea1880647f1e8a0962/contracts/test/mock/ERC20Mock.sol">Git Source</a></p>
<h2 id="functions-12"><a class="header" href="#functions-12">Functions</a></h2>
<h3 id="transferfrom-1"><a class="header" href="#transferfrom-1">transferFrom</a></h3>
<pre><code class="language-solidity">function transferFrom(address, address, uint256) public pure returns (bool);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="erc20noreturnmock"><a class="header" href="#erc20noreturnmock">ERC20NoReturnMock</a></h1>
<p><a href="https://github.com/sonastream/core/blob/7c2284c734e2c8a2224e94ea1880647f1e8a0962/contracts/test/mock/ERC20Mock.sol">Git Source</a></p>
<h2 id="functions-13"><a class="header" href="#functions-13">Functions</a></h2>
<h3 id="transferfrom-2"><a class="header" href="#transferfrom-2">transferFrom</a></h3>
<pre><code class="language-solidity">function transferFrom(address, address, uint256) public pure;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rewardtokenmock"><a class="header" href="#rewardtokenmock">RewardTokenMock</a></h1>
<p><a href="https://github.com/sonastream/core/blob/7c2284c734e2c8a2224e94ea1880647f1e8a0962/contracts/test/mock/RewardTokenMock.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
ERC721ConsecutiveEnumerableMock</p>
<h2 id="state-variables-6"><a class="header" href="#state-variables-6">State Variables</a></h2>
<h3 id="altaddress"><a class="header" href="#altaddress">altAddress</a></h3>
<pre><code class="language-solidity">address payable public altAddress;
</code></pre>
<h2 id="functions-14"><a class="header" href="#functions-14">Functions</a></h2>
<h3 id="constructor-3"><a class="header" href="#constructor-3">constructor</a></h3>
<pre><code class="language-solidity">constructor(
    string memory name,
    string memory symbol,
    address[] memory receivers,
    uint96[] memory amounts,
    address payable _altAddress
) ERC721ConsecutiveEnumerableMock(name, symbol, receivers, amounts);
</code></pre>
<h3 id="setsplitaddr"><a class="header" href="#setsplitaddr">setSplitAddr</a></h3>
<pre><code class="language-solidity">function setSplitAddr(address payable _newSplit) public;
</code></pre>
<h3 id="getrewardtokenpayoutaddr-1"><a class="header" href="#getrewardtokenpayoutaddr-1">getRewardTokenPayoutAddr</a></h3>
<pre><code class="language-solidity">function getRewardTokenPayoutAddr(uint256)
    external
    view
    returns (address payable splits);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="weth9mock"><a class="header" href="#weth9mock">Weth9Mock</a></h1>
<p><a href="https://github.com/sonastream/core/blob/7c2284c734e2c8a2224e94ea1880647f1e8a0962/contracts/test/mock/Weth9Mock.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="contracts/test/mock/Weth9Mock.sol//contracts/interfaces/IWETH.sol/interface.IWETH.html">IWETH</a></p>
<h2 id="state-variables-7"><a class="header" href="#state-variables-7">State Variables</a></h2>
<h3 id="name"><a class="header" href="#name">name</a></h3>
<pre><code class="language-solidity">string public name = &quot;Mock Wrapped Ether&quot;;
</code></pre>
<h3 id="symbol"><a class="header" href="#symbol">symbol</a></h3>
<pre><code class="language-solidity">string public symbol = &quot;mWETH&quot;;
</code></pre>
<h3 id="decimals"><a class="header" href="#decimals">decimals</a></h3>
<pre><code class="language-solidity">uint8 public decimals = 18;
</code></pre>
<h3 id="balanceof-1"><a class="header" href="#balanceof-1">balanceOf</a></h3>
<pre><code class="language-solidity">mapping(address =&gt; uint256) public balanceOf;
</code></pre>
<h3 id="allowance-1"><a class="header" href="#allowance-1">allowance</a></h3>
<pre><code class="language-solidity">mapping(address =&gt; mapping(address =&gt; uint256)) public allowance;
</code></pre>
<h2 id="functions-15"><a class="header" href="#functions-15">Functions</a></h2>
<h3 id="receive-2"><a class="header" href="#receive-2">receive</a></h3>
<pre><code class="language-solidity">receive() external payable;
</code></pre>
<h3 id="deposit-2"><a class="header" href="#deposit-2">deposit</a></h3>
<pre><code class="language-solidity">function deposit() public payable virtual;
</code></pre>
<h3 id="withdraw-3"><a class="header" href="#withdraw-3">withdraw</a></h3>
<pre><code class="language-solidity">function withdraw(uint256 wad) public virtual;
</code></pre>
<h3 id="totalsupply"><a class="header" href="#totalsupply">totalSupply</a></h3>
<pre><code class="language-solidity">function totalSupply() public view virtual returns (uint256);
</code></pre>
<h3 id="approve"><a class="header" href="#approve">approve</a></h3>
<pre><code class="language-solidity">function approve(address guy, uint256 wad) public virtual returns (bool);
</code></pre>
<h3 id="transfer-2"><a class="header" href="#transfer-2">transfer</a></h3>
<pre><code class="language-solidity">function transfer(address dst, uint256 wad) public virtual returns (bool);
</code></pre>
<h3 id="transferfrom-3"><a class="header" href="#transferfrom-3">transferFrom</a></h3>
<pre><code class="language-solidity">function transferFrom(address src, address dst, uint256 wad)
    public
    virtual
    returns (bool);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sonareserveauctiontest"><a class="header" href="#sonareserveauctiontest">SonaReserveAuctionTest</a></h1>
<p><a href="https://github.com/sonastream/core/blob/7c2284c734e2c8a2224e94ea1880647f1e8a0962/contracts/test/SonaReserveAuction.t.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="contracts/test/SonaReserveAuction.t.sol//contracts/test/Util.sol/contract.Util.html">Util</a>, <a href="contracts/test/SonaReserveAuction.t.sol//contracts/SonaReserveAuction.sol/contract.SonaReserveAuction.html">SonaReserveAuction</a></p>
<h2 id="state-variables-8"><a class="header" href="#state-variables-8">State Variables</a></h2>
<h3 id="auction-2"><a class="header" href="#auction-2">auction</a></h3>
<pre><code class="language-solidity">SonaReserveAuction public auction;
</code></pre>
<h3 id="trackaddress"><a class="header" href="#trackaddress">trackAddress</a></h3>
<pre><code class="language-solidity">address public trackAddress;
</code></pre>
<h3 id="treasuryrecipient"><a class="header" href="#treasuryrecipient">treasuryRecipient</a></h3>
<pre><code class="language-solidity">address public treasuryRecipient = makeAddr(&quot;treasuryRecipient&quot;);
</code></pre>
<h3 id="redistributionrecipient"><a class="header" href="#redistributionrecipient">redistributionRecipient</a></h3>
<pre><code class="language-solidity">address public redistributionRecipient = makeAddr(&quot;redistributionRecipient&quot;);
</code></pre>
<h3 id="trackminter"><a class="header" href="#trackminter">trackMinter</a></h3>
<pre><code class="language-solidity">address public trackMinter = makeAddr(&quot;trackMinter&quot;);
</code></pre>
<h3 id="rootowner"><a class="header" href="#rootowner">rootOwner</a></h3>
<pre><code class="language-solidity">address public rootOwner = makeAddr(&quot;rootOwner&quot;);
</code></pre>
<h3 id="bidder"><a class="header" href="#bidder">bidder</a></h3>
<pre><code class="language-solidity">address public bidder = makeAddr(&quot;bidder&quot;);
</code></pre>
<h3 id="secondbidder"><a class="header" href="#secondbidder">secondBidder</a></h3>
<pre><code class="language-solidity">address public secondBidder = makeAddr(&quot;secondBidder&quot;);
</code></pre>
<h3 id="nonethtoken"><a class="header" href="#nonethtoken">nonEthToken</a></h3>
<pre><code class="language-solidity">address public nonEthToken = makeAddr(&quot;nonEthToken&quot;);
</code></pre>
<h3 id="mnemonic"><a class="header" href="#mnemonic">mnemonic</a></h3>
<pre><code class="language-solidity">string public mnemonic =
    &quot;test test test test test test test test test test test junk&quot;;
</code></pre>
<h3 id="authorizerkey"><a class="header" href="#authorizerkey">authorizerKey</a></h3>
<pre><code class="language-solidity">uint256 public authorizerKey = vm.deriveKey(mnemonic, 0);
</code></pre>
<h3 id="authorizer"><a class="header" href="#authorizer">authorizer</a></h3>
<pre><code class="language-solidity">address public authorizer = 0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266;
</code></pre>
<h3 id="artistpayout"><a class="header" href="#artistpayout">artistPayout</a></h3>
<pre><code class="language-solidity">address payable public artistPayout = payable(address(25));
</code></pre>
<h3 id="tokenid"><a class="header" href="#tokenid">tokenId</a></h3>
<pre><code class="language-solidity">uint256 public tokenId = (uint256(uint160(trackMinter)) &lt;&lt; 96) | 69;
</code></pre>
<h3 id="mockweth"><a class="header" href="#mockweth">mockWeth</a></h3>
<pre><code class="language-solidity">Weth9Mock public mockWeth = new Weth9Mock();
</code></pre>
<h3 id="contractbidder"><a class="header" href="#contractbidder">contractBidder</a></h3>
<pre><code class="language-solidity">ContractBidderMock public contractBidder;
</code></pre>
<h2 id="functions-16"><a class="header" href="#functions-16">Functions</a></h2>
<h3 id="setup"><a class="header" href="#setup">setUp</a></h3>
<pre><code class="language-solidity">function setUp() public;
</code></pre>
<h3 id="test_revertswithinvalidaddress"><a class="header" href="#test_revertswithinvalidaddress">test_revertsWithInvalidAddress</a></h3>
<pre><code class="language-solidity">function test_revertsWithInvalidAddress() public;
</code></pre>
<h3 id="_createsignedbundles"><a class="header" href="#_createsignedbundles">_createSignedBundles</a></h3>
<pre><code class="language-solidity">function _createSignedBundles()
    private
    view
    returns (MetadataBundle[2] memory bundles, Signature[2] memory signatures);
</code></pre>
<h3 id="_createbundles"><a class="header" href="#_createbundles">_createBundles</a></h3>
<pre><code class="language-solidity">function _createBundles()
    private
    view
    returns (MetadataBundle[2] memory bundles);
</code></pre>
<h3 id="_signbundle"><a class="header" href="#_signbundle">_signBundle</a></h3>
<pre><code class="language-solidity">function _signBundle(MetadataBundle memory _bundle)
    private
    view
    returns (Signature memory signature);
</code></pre>
<h3 id="_getbundlesignatures"><a class="header" href="#_getbundlesignatures">_getBundleSignatures</a></h3>
<pre><code class="language-solidity">function _getBundleSignatures(MetadataBundle[2] memory _bundles)
    private
    view
    returns (Signature[2] memory signatures);
</code></pre>
<h3 id="test_createreserveauction"><a class="header" href="#test_createreserveauction">test_CreateReserveAuction</a></h3>
<pre><code class="language-solidity">function test_CreateReserveAuction() public;
</code></pre>
<h3 id="test_createreserveauctionmultiplereverts"><a class="header" href="#test_createreserveauctionmultiplereverts">test_CreateReserveAuctionMultipleReverts</a></h3>
<pre><code class="language-solidity">function test_CreateReserveAuctionMultipleReverts() public;
</code></pre>
<h3 id="test_createreserveauctionzeroreservereverts"><a class="header" href="#test_createreserveauctionzeroreservereverts">test_CreateReserveAuctionZeroReserveReverts</a></h3>
<pre><code class="language-solidity">function test_CreateReserveAuctionZeroReserveReverts() public;
</code></pre>
<h3 id="test_createreserveauctionwithinvalidartistbundlereverts"><a class="header" href="#test_createreserveauctionwithinvalidartistbundlereverts">test_CreateReserveAuctionWithInvalidArtistBundleReverts</a></h3>
<pre><code class="language-solidity">function test_CreateReserveAuctionWithInvalidArtistBundleReverts() public;
</code></pre>
<h3 id="test_createreserveauctionwithinvalidcollectorbundlereverts"><a class="header" href="#test_createreserveauctionwithinvalidcollectorbundlereverts">test_CreateReserveAuctionWithInvalidCollectorBundleReverts</a></h3>
<pre><code class="language-solidity">function test_CreateReserveAuctionWithInvalidCollectorBundleReverts() public;
</code></pre>
<h3 id="test_createreserveauctionwithinvalidartisttokenidreverts"><a class="header" href="#test_createreserveauctionwithinvalidartisttokenidreverts">test_CreateReserveAuctionWithInvalidArtistTokenIdReverts</a></h3>
<pre><code class="language-solidity">function test_CreateReserveAuctionWithInvalidArtistTokenIdReverts() public;
</code></pre>
<h3 id="test_createreserveauctionwithinvalidcollectortokenidreverts"><a class="header" href="#test_createreserveauctionwithinvalidcollectortokenidreverts">test_CreateReserveAuctionWithInvalidCollectorTokenIdReverts</a></h3>
<pre><code class="language-solidity">function test_CreateReserveAuctionWithInvalidCollectorTokenIdReverts() public;
</code></pre>
<h3 id="test_createreserveauctionwithinvalidcallerreverts"><a class="header" href="#test_createreserveauctionwithinvalidcallerreverts">test_CreateReserveAuctionWithInvalidCallerReverts</a></h3>
<pre><code class="language-solidity">function test_CreateReserveAuctionWithInvalidCallerReverts() public;
</code></pre>
<h3 id="test_createbid"><a class="header" href="#test_createbid">test_CreateBid</a></h3>
<pre><code class="language-solidity">function test_CreateBid() public;
</code></pre>
<h3 id="test_createbidwithinvalidauctionreverts"><a class="header" href="#test_createbidwithinvalidauctionreverts">test_CreateBidWithInvalidAuctionReverts</a></h3>
<pre><code class="language-solidity">function test_CreateBidWithInvalidAuctionReverts() public;
</code></pre>
<h3 id="test_createbidwithzerobidreverts"><a class="header" href="#test_createbidwithzerobidreverts">test_CreateBidWithZeroBidReverts</a></h3>
<pre><code class="language-solidity">function test_CreateBidWithZeroBidReverts() public;
</code></pre>
<h3 id="test_createbidwithlowbidreverts"><a class="header" href="#test_createbidwithlowbidreverts">test_CreateBidWithLowBidReverts</a></h3>
<pre><code class="language-solidity">function test_CreateBidWithLowBidReverts() public;
</code></pre>
<h3 id="test_createbidwithsamebidder"><a class="header" href="#test_createbidwithsamebidder">test_CreateBidWithSameBidder</a></h3>
<pre><code class="language-solidity">function test_CreateBidWithSameBidder() public;
</code></pre>
<h3 id="test_createlowbidwithsamebidderreverts"><a class="header" href="#test_createlowbidwithsamebidderreverts">test_CreateLowBidWithSameBidderReverts</a></h3>
<pre><code class="language-solidity">function test_CreateLowBidWithSameBidderReverts() public;
</code></pre>
<h3 id="test_createmultiplebidsreturnsoriginalerc20bidderfunds"><a class="header" href="#test_createmultiplebidsreturnsoriginalerc20bidderfunds">test_CreateMultipleBidsReturnsOriginalERC20BidderFunds</a></h3>
<pre><code class="language-solidity">function test_CreateMultipleBidsReturnsOriginalERC20BidderFunds() public;
</code></pre>
<h3 id="test_createmultiplebidsreturnsoriginaletheoabidderfundswitheth"><a class="header" href="#test_createmultiplebidsreturnsoriginaletheoabidderfundswitheth">test_CreateMultipleBidsReturnsOriginalETHEOABidderFundsWithEth</a></h3>
<pre><code class="language-solidity">function test_CreateMultipleBidsReturnsOriginalETHEOABidderFundsWithEth()
    public;
</code></pre>
<h3 id="test_createbidwithonexpiredauctionreverts"><a class="header" href="#test_createbidwithonexpiredauctionreverts">test_CreateBidWithOnExpiredAuctionReverts</a></h3>
<pre><code class="language-solidity">function test_CreateBidWithOnExpiredAuctionReverts() public;
</code></pre>
<h3 id="test_cancelauction"><a class="header" href="#test_cancelauction">test_CancelAuction</a></h3>
<pre><code class="language-solidity">function test_CancelAuction() public;
</code></pre>
<h3 id="test_updatereserveauctionpricewithzeroreverts"><a class="header" href="#test_updatereserveauctionpricewithzeroreverts">test_UpdateReserveAuctionPriceWithZeroReverts</a></h3>
<pre><code class="language-solidity">function test_UpdateReserveAuctionPriceWithZeroReverts() public;
</code></pre>
<h3 id="test_updatereserveauctionprice"><a class="header" href="#test_updatereserveauctionprice">test_UpdateReserveAuctionPrice</a></h3>
<pre><code class="language-solidity">function test_UpdateReserveAuctionPrice() public;
</code></pre>
<h3 id="test_updatereserveauctionpriceauctionalreadylive"><a class="header" href="#test_updatereserveauctionpriceauctionalreadylive">test_UpdateReserveAuctionPriceAuctionAlreadyLive</a></h3>
<pre><code class="language-solidity">function test_UpdateReserveAuctionPriceAuctionAlreadyLive() public;
</code></pre>
<h3 id="test_updatereserveauctionpricewithinvalidcallerreverts"><a class="header" href="#test_updatereserveauctionpricewithinvalidcallerreverts">test_UpdateReserveAuctionPriceWithInvalidCallerReverts</a></h3>
<pre><code class="language-solidity">function test_UpdateReserveAuctionPriceWithInvalidCallerReverts() public;
</code></pre>
<h3 id="test_createduplicatefailsaftersettlement"><a class="header" href="#test_createduplicatefailsaftersettlement">test_CreateDuplicateFailsAfterSettlement</a></h3>
<pre><code class="language-solidity">function test_CreateDuplicateFailsAfterSettlement() public;
</code></pre>
<h3 id="test_settlereserveauction"><a class="header" href="#test_settlereserveauction">test_SettleReserveAuction</a></h3>
<pre><code class="language-solidity">function test_SettleReserveAuction() public;
</code></pre>
<h3 id="test_settlereserveauctionwhilelivereverts"><a class="header" href="#test_settlereserveauctionwhilelivereverts">test_SettleReserveAuctionWhileLiveReverts</a></h3>
<pre><code class="language-solidity">function test_SettleReserveAuctionWhileLiveReverts() public;
</code></pre>
<h3 id="test_settlereserveauctioninvalidcallerreverts"><a class="header" href="#test_settlereserveauctioninvalidcallerreverts">test_SettleReserveAuctionInvalidCallerReverts</a></h3>
<pre><code class="language-solidity">function test_SettleReserveAuctionInvalidCallerReverts() public;
</code></pre>
<h3 id="test_cancelinvalidreserveauctionreverts"><a class="header" href="#test_cancelinvalidreserveauctionreverts">test_CancelInvalidReserveAuctionReverts</a></h3>
<pre><code class="language-solidity">function test_CancelInvalidReserveAuctionReverts() public;
</code></pre>
<h3 id="test_cancelreserveauctioninvalidcallerreverts"><a class="header" href="#test_cancelreserveauctioninvalidcallerreverts">test_CancelReserveAuctionInvalidCallerReverts</a></h3>
<pre><code class="language-solidity">function test_CancelReserveAuctionInvalidCallerReverts() public;
</code></pre>
<h3 id="test_cancelreserveauctionstilllivereverts"><a class="header" href="#test_cancelreserveauctionstilllivereverts">test_CancelReserveAuctionStillLiveReverts</a></h3>
<pre><code class="language-solidity">function test_CancelReserveAuctionStillLiveReverts() public;
</code></pre>
<h3 id="test_createreserveauctionwitherc20currency"><a class="header" href="#test_createreserveauctionwitherc20currency">test_CreateReserveAuctionWithERC20Currency</a></h3>
<pre><code class="language-solidity">function test_CreateReserveAuctionWithERC20Currency() public;
</code></pre>
<h3 id="test_createbiderc20"><a class="header" href="#test_createbiderc20">test_CreateBidERC20</a></h3>
<pre><code class="language-solidity">function test_CreateBidERC20() public;
</code></pre>
<h3 id="test_createbidwithbrokenerc20reverts"><a class="header" href="#test_createbidwithbrokenerc20reverts">test_CreateBidWithBrokenERC20Reverts</a></h3>
<pre><code class="language-solidity">function test_CreateBidWithBrokenERC20Reverts() public;
</code></pre>
<h3 id="test_createbidwithinvaliderc20permissionsreverts"><a class="header" href="#test_createbidwithinvaliderc20permissionsreverts">test_CreateBidWithInvalidERC20PermissionsReverts</a></h3>
<pre><code class="language-solidity">function test_CreateBidWithInvalidERC20PermissionsReverts() public;
</code></pre>
<h3 id="test_createbiderc20withethreverts"><a class="header" href="#test_createbiderc20withethreverts">test_CreateBidERC20WithEthReverts</a></h3>
<pre><code class="language-solidity">function test_CreateBidERC20WithEthReverts() public;
</code></pre>
<h3 id="test_updatereserveauctionpayoutaddress"><a class="header" href="#test_updatereserveauctionpayoutaddress">test_UpdateReserveAuctionPayoutAddress</a></h3>
<pre><code class="language-solidity">function test_UpdateReserveAuctionPayoutAddress() public;
</code></pre>
<h3 id="test_invalidupdatereserveauctionpayoutaddress"><a class="header" href="#test_invalidupdatereserveauctionpayoutaddress">test_InvalidUpdateReserveAuctionPayoutAddress</a></h3>
<pre><code class="language-solidity">function test_InvalidUpdateReserveAuctionPayoutAddress() public;
</code></pre>
<h3 id="test_updatereserveauctionpriceandcurrency"><a class="header" href="#test_updatereserveauctionpriceandcurrency">test_UpdateReserveAuctionPriceAndCurrency</a></h3>
<pre><code class="language-solidity">function test_UpdateReserveAuctionPriceAndCurrency() public;
</code></pre>
<h3 id="test_updatereserveauctionpriceandcurrencyauctionzeropricereverts"><a class="header" href="#test_updatereserveauctionpriceandcurrencyauctionzeropricereverts">test_UpdateReserveAuctionPriceAndCurrencyAuctionZeroPriceReverts</a></h3>
<pre><code class="language-solidity">function test_UpdateReserveAuctionPriceAndCurrencyAuctionZeroPriceReverts()
    public;
</code></pre>
<h3 id="test_updatereserveauctionpriceandcurrencyauctionalreadylive"><a class="header" href="#test_updatereserveauctionpriceandcurrencyauctionalreadylive">test_UpdateReserveAuctionPriceAndCurrencyAuctionAlreadyLive</a></h3>
<pre><code class="language-solidity">function test_UpdateReserveAuctionPriceAndCurrencyAuctionAlreadyLive() public;
</code></pre>
<h3 id="test_updatereserveauctionpriceandcurrencywithinvalidcallerreverts"><a class="header" href="#test_updatereserveauctionpriceandcurrencywithinvalidcallerreverts">test_UpdateReserveAuctionPriceAndCurrencyWithInvalidCallerReverts</a></h3>
<pre><code class="language-solidity">function test_UpdateReserveAuctionPriceAndCurrencyWithInvalidCallerReverts()
    public;
</code></pre>
<h3 id="testfuzz_settlereserveauctionsendsethfundstosplits"><a class="header" href="#testfuzz_settlereserveauctionsendsethfundstosplits">testFuzz_SettleReserveAuctionSendsEthFundsToSplits</a></h3>
<pre><code class="language-solidity">function testFuzz_SettleReserveAuctionSendsEthFundsToSplits(
    uint256 _reservePrice,
    uint256 _bidAmount
) public;
</code></pre>
<h3 id="testfuzz_settlereserveauctionsendserc20fundstosplits"><a class="header" href="#testfuzz_settlereserveauctionsendserc20fundstosplits">testFuzz_SettleReserveAuctionSendsERC20FundsToSplits</a></h3>
<pre><code class="language-solidity">function testFuzz_SettleReserveAuctionSendsERC20FundsToSplits(
    uint256 _reservePrice,
    uint256 _bidAmount
) public;
</code></pre>
<h3 id="testfuzz_sendethproceedstoartistaddress"><a class="header" href="#testfuzz_sendethproceedstoartistaddress">testFuzz_SendEthProceedsToArtistAddress</a></h3>
<pre><code class="language-solidity">function testFuzz_SendEthProceedsToArtistAddress(
    uint256 _reservePrice,
    uint256 _bidAmount
) public;
</code></pre>
<h3 id="testfuzz_settlereserveauctionsendserc20fundstoartistaddress"><a class="header" href="#testfuzz_settlereserveauctionsendserc20fundstoartistaddress">testFuzz_SettleReserveAuctionSendsERC20FundsToArtistAddress</a></h3>
<pre><code class="language-solidity">function testFuzz_SettleReserveAuctionSendsERC20FundsToArtistAddress(
    uint256 _reservePrice,
    uint256 _bidAmount
) public;
</code></pre>
<h3 id="test_contractbidderacceptsethrefunds"><a class="header" href="#test_contractbidderacceptsethrefunds">test_ContractBidderAcceptsEthRefunds</a></h3>
<pre><code class="language-solidity">function test_ContractBidderAcceptsEthRefunds() public;
</code></pre>
<h3 id="test_contractbidderrejectsethrefunds"><a class="header" href="#test_contractbidderrejectsethrefunds">test_ContractBidderRejectsEthRefunds</a></h3>
<pre><code class="language-solidity">function test_ContractBidderRejectsEthRefunds() public;
</code></pre>
<h3 id="test_cancelauctionthatsendedreverts"><a class="header" href="#test_cancelauctionthatsendedreverts">test_CancelAuctionThatsEndedReverts</a></h3>
<pre><code class="language-solidity">function test_CancelAuctionThatsEndedReverts() public;
</code></pre>
<h3 id="_makedomainhash"><a class="header" href="#_makedomainhash">_makeDomainHash</a></h3>
<pre><code class="language-solidity">function _makeDomainHash() private view returns (bytes32);
</code></pre>
<h3 id="_hashfrommemory"><a class="header" href="#_hashfrommemory">_hashFromMemory</a></h3>
<pre><code class="language-solidity">function _hashFromMemory(MetadataBundle memory bundle)
    internal
    pure
    returns (bytes32);
</code></pre>
<h3 id="_getbundlehash"><a class="header" href="#_getbundlehash">_getBundleHash</a></h3>
<pre><code class="language-solidity">function _getBundleHash(MetadataBundle memory _bundle)
    private
    view
    returns (bytes32);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sonarewardtokentest"><a class="header" href="#sonarewardtokentest">SonaRewardTokenTest</a></h1>
<p><a href="https://github.com/sonastream/core/blob/7c2284c734e2c8a2224e94ea1880647f1e8a0962/contracts/test/SonaRewardToken.t.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="contracts/test/SonaRewardToken.t.sol//contracts/test/Util.sol/contract.Util.html">Util</a>, ERC721Holder, <a href="contracts/test/SonaRewardToken.t.sol//contracts/SonaRewardToken.sol/contract.SonaRewardToken.html">SonaRewardToken</a></p>
<h2 id="state-variables-9"><a class="header" href="#state-variables-9">State Variables</a></h2>
<h3 id="treasuryrecipient-1"><a class="header" href="#treasuryrecipient-1">treasuryRecipient</a></h3>
<pre><code class="language-solidity">address public treasuryRecipient = makeAddr(&quot;treasuryRecipient&quot;);
</code></pre>
<h3 id="redistributionrecipient-1"><a class="header" href="#redistributionrecipient-1">redistributionRecipient</a></h3>
<pre><code class="language-solidity">address public redistributionRecipient = makeAddr(&quot;redistributionRecipient&quot;);
</code></pre>
<h3 id="rewardtokenrecipient"><a class="header" href="#rewardtokenrecipient">rewardTokenRecipient</a></h3>
<pre><code class="language-solidity">address public rewardTokenRecipient = makeAddr(&quot;rewardTokenRecipient&quot;);
</code></pre>
<h3 id="auctioninitializer"><a class="header" href="#auctioninitializer">auctionInitializer</a></h3>
<pre><code class="language-solidity">address public auctionInitializer = makeAddr(&quot;auctionInitializer&quot;);
</code></pre>
<h3 id="zerosplitsaddr"><a class="header" href="#zerosplitsaddr">zeroSplitsAddr</a></h3>
<pre><code class="language-solidity">address payable public zeroSplitsAddr = payable(address(0));
</code></pre>
<h3 id="payoutaddr"><a class="header" href="#payoutaddr">payoutAddr</a></h3>
<pre><code class="language-solidity">address payable public payoutAddr = payable(makeAddr(&quot;splitAddress&quot;));
</code></pre>
<h3 id="_tokenid"><a class="header" href="#_tokenid">_tokenId</a></h3>
<pre><code class="language-solidity">uint256 private _tokenId = (uint256(uint160(address(this))) &lt;&lt; 96) | 3;
</code></pre>
<h3 id="_artisttokenid"><a class="header" href="#_artisttokenid">_artistTokenId</a></h3>
<pre><code class="language-solidity">uint256 private _artistTokenId = (uint256(uint160(address(this))) &lt;&lt; 96) | 2;
</code></pre>
<h3 id="rewardtoken-1"><a class="header" href="#rewardtoken-1">rewardToken</a></h3>
<pre><code class="language-solidity">SonaRewardToken public rewardToken;
</code></pre>
<h2 id="functions-17"><a class="header" href="#functions-17">Functions</a></h2>
<h3 id="setup-1"><a class="header" href="#setup-1">setUp</a></h3>
<pre><code class="language-solidity">function setUp() public;
</code></pre>
<h3 id="test_unauthorizedmintreverts"><a class="header" href="#test_unauthorizedmintreverts">test_UnauthorizedMintReverts</a></h3>
<pre><code class="language-solidity">function test_UnauthorizedMintReverts(address badMinter) public;
</code></pre>
<h3 id="test_initializedparams"><a class="header" href="#test_initializedparams">test_initializedParams</a></h3>
<pre><code class="language-solidity">function test_initializedParams() public;
</code></pre>
<h3 id="test_invalidtokenidontokenuriexistsreverts"><a class="header" href="#test_invalidtokenidontokenuriexistsreverts">test_InvalidTokenIDOnTokenURIExistsReverts</a></h3>
<pre><code class="language-solidity">function test_InvalidTokenIDOnTokenURIExistsReverts() public;
</code></pre>
<h3 id="test_updaterewardtokenmetadata"><a class="header" href="#test_updaterewardtokenmetadata">test_UpdateRewardTokenMetadata</a></h3>
<pre><code class="language-solidity">function test_UpdateRewardTokenMetadata() public;
</code></pre>
<h3 id="test_burncreatorrewardtoken"><a class="header" href="#test_burncreatorrewardtoken">test_BurnCreatorRewardToken</a></h3>
<pre><code class="language-solidity">function test_BurnCreatorRewardToken() public;
</code></pre>
<h3 id="test_burncollectorrewardtoken"><a class="header" href="#test_burncollectorrewardtoken">test_BurnCollectorRewardToken</a></h3>
<pre><code class="language-solidity">function test_BurnCollectorRewardToken() public;
</code></pre>
<h3 id="test_creatorburncollectortokenfails"><a class="header" href="#test_creatorburncollectortokenfails">test_CreatorBurnCollectorTokenFails</a></h3>
<pre><code class="language-solidity">function test_CreatorBurnCollectorTokenFails() public;
</code></pre>
<h3 id="testfuzz_randomburnerfails"><a class="header" href="#testfuzz_randomburnerfails">testFuzz_randomBurnerFails</a></h3>
<pre><code class="language-solidity">function testFuzz_randomBurnerFails(
    address _artistBurner,
    address _collectorBurner
) public;
</code></pre>
<h3 id="test_mintsucceeds"><a class="header" href="#test_mintsucceeds">test_MintSucceeds</a></h3>
<pre><code class="language-solidity">function test_MintSucceeds() public;
</code></pre>
<h3 id="test_mintfails"><a class="header" href="#test_mintfails">test_MintFails</a></h3>
<pre><code class="language-solidity">function test_MintFails() public;
</code></pre>
<h3 id="test_updatepayoutaddress"><a class="header" href="#test_updatepayoutaddress">test_updatePayoutAddress</a></h3>
<pre><code class="language-solidity">function test_updatePayoutAddress() public;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sonatestrewards"><a class="header" href="#sonatestrewards">SonaTestRewards</a></h1>
<p><a href="https://github.com/sonastream/core/blob/7c2284c734e2c8a2224e94ea1880647f1e8a0962/contracts/test/SonaRewards.t.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="contracts/test/SonaRewards.t.sol//contracts/test/Util.sol/contract.Util.html">Util</a>, <a href="contracts/test/SonaRewards.t.sol//contracts/SonaRewards.sol/contract.SonaRewards.html">SonaRewards</a></p>
<h2 id="state-variables-10"><a class="header" href="#state-variables-10">State Variables</a></h2>
<h3 id="rewardsbase"><a class="header" href="#rewardsbase">rewardsBase</a></h3>
<pre><code class="language-solidity">SonaRewards public rewardsBase;
</code></pre>
<h3 id="rewards"><a class="header" href="#rewards">rewards</a></h3>
<pre><code class="language-solidity">SonaRewards public rewards;
</code></pre>
<h3 id="proxy"><a class="header" href="#proxy">proxy</a></h3>
<pre><code class="language-solidity">ERC1967Proxy public proxy;
</code></pre>
<h3 id="wethrewardsbase"><a class="header" href="#wethrewardsbase">wEthRewardsBase</a></h3>
<pre><code class="language-solidity">SonaRewards public wEthRewardsBase;
</code></pre>
<h3 id="wethrewards"><a class="header" href="#wethrewards">wEthRewards</a></h3>
<pre><code class="language-solidity">SonaRewards public wEthRewards;
</code></pre>
<h3 id="wethproxy"><a class="header" href="#wethproxy">wEthProxy</a></h3>
<pre><code class="language-solidity">ERC1967Proxy public wEthProxy;
</code></pre>
<h3 id="rewardadmin"><a class="header" href="#rewardadmin">rewardAdmin</a></h3>
<pre><code class="language-solidity">address public rewardAdmin = makeAddr(&quot;rewardAdmin&quot;);
</code></pre>
<h3 id="rewardholder"><a class="header" href="#rewardholder">rewardHolder</a></h3>
<pre><code class="language-solidity">address public rewardHolder = makeAddr(&quot;rewardHolder&quot;);
</code></pre>
<h3 id="m"><a class="header" href="#m">m</a></h3>
<pre><code class="language-solidity">Merkle public m = new Merkle();
</code></pre>
<h3 id="mockrewardtoken"><a class="header" href="#mockrewardtoken">mockRewardToken</a></h3>
<pre><code class="language-solidity">ERC20ReturnTrueMock public mockRewardToken = new ERC20ReturnTrueMock();
</code></pre>
<h3 id="mockweth-1"><a class="header" href="#mockweth-1">mockWeth</a></h3>
<pre><code class="language-solidity">Weth9Mock public mockWeth = new Weth9Mock();
</code></pre>
<h3 id="_holders"><a class="header" href="#_holders">_holders</a></h3>
<pre><code class="language-solidity">address[] private _holders =
    [rewardHolder, rewardHolder, rewardHolder, rewardHolder];
</code></pre>
<h3 id="_nftqtys"><a class="header" href="#_nftqtys">_nftQtys</a></h3>
<pre><code class="language-solidity">uint96[] private _nftQtys = [1, 1, 1, 1];
</code></pre>
<h3 id="_mockurl"><a class="header" href="#_mockurl">_mockUrl</a></h3>
<pre><code class="language-solidity">string private _mockUrl = &quot;https://mockurl.com/{address}/{data}.json&quot;;
</code></pre>
<h3 id="mockrewardstoken"><a class="header" href="#mockrewardstoken">mockRewardsToken</a></h3>
<pre><code class="language-solidity">MockRewardToken public mockRewardsToken = new MockRewardToken(
			&quot;Mock Tracks&quot;,
			&quot;MOCK&quot;,
			_holders,
			_nftQtys,
			payable(address(0))
		);
</code></pre>
<h2 id="functions-18"><a class="header" href="#functions-18">Functions</a></h2>
<h3 id="setup-2"><a class="header" href="#setup-2">setUp</a></h3>
<pre><code class="language-solidity">function setUp() public;
</code></pre>
<h3 id="test_initfail"><a class="header" href="#test_initfail">test_InitFail</a></h3>
<pre><code class="language-solidity">function test_InitFail() public;
</code></pre>
<h3 id="test_receivefail"><a class="header" href="#test_receivefail">test_ReceiveFail</a></h3>
<pre><code class="language-solidity">function test_ReceiveFail() public;
</code></pre>
<h3 id="testfuzz_addroot"><a class="header" href="#testfuzz_addroot">testFuzz_AddRoot</a></h3>
<pre><code class="language-solidity">function testFuzz_AddRoot(bytes32 _root, uint64 _start, uint64 _end) public;
</code></pre>
<h3 id="testfuzz_claimmanyrewards"><a class="header" href="#testfuzz_claimmanyrewards">testFuzz_ClaimManyRewards</a></h3>
<pre><code class="language-solidity">function testFuzz_ClaimManyRewards(uint8 _treeCount, uint256 _amount) public;
</code></pre>
<h3 id="test_claimrewards"><a class="header" href="#test_claimrewards">test_ClaimRewards</a></h3>
<pre><code class="language-solidity">function test_ClaimRewards() public;
</code></pre>
<h3 id="test_claimrewardstosplit"><a class="header" href="#test_claimrewardstosplit">test_ClaimRewardsToSplit</a></h3>
<pre><code class="language-solidity">function test_ClaimRewardsToSplit() public;
</code></pre>
<h3 id="testfuzz_nonholderreverts"><a class="header" href="#testfuzz_nonholderreverts">testFuzz_nonHolderReverts</a></h3>
<pre><code class="language-solidity">function testFuzz_nonHolderReverts(address nonHolder) public;
</code></pre>
<h3 id="test_revertontransfererror"><a class="header" href="#test_revertontransfererror">test_RevertOnTransferError</a></h3>
<pre><code class="language-solidity">function test_RevertOnTransferError() public;
</code></pre>
<h3 id="test_claimlookup"><a class="header" href="#test_claimlookup">test_ClaimLookup</a></h3>
<pre><code class="language-solidity">function test_ClaimLookup() public;
</code></pre>
<h3 id="_setupclaims"><a class="header" href="#_setupclaims">_setUpClaims</a></h3>
<pre><code class="language-solidity">function _setUpClaims(SonaRewards _rewards)
    private
    returns (
        uint256 tokenId,
        uint256[] memory rootIds,
        bytes32[][] memory proofs,
        uint256[] memory amounts
    );
</code></pre>
<h2 id="events-6"><a class="header" href="#events-6">Events</a></h2>
<h3 id="transfer-3"><a class="header" href="#transfer-3">Transfer</a></h3>
<pre><code class="language-solidity">event Transfer(address indexed from, address indexed to, uint256 value);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="util"><a class="header" href="#util">Util</a></h1>
<p><a href="https://github.com/sonastream/core/blob/7c2284c734e2c8a2224e94ea1880647f1e8a0962/contracts/test/Util.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
Test</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-7"><a class="header" href="#contents-7">Contents</a></h1>
<ul>
<li><a href="contracts/utils/AddressableTokenId.sol/library.AddressableTokenId.html">AddressableTokenId</a></li>
<li><a href="contracts/utils/Clones.sol/error.CreateError.html">CreateError</a></li>
<li><a href="contracts/utils/Clones.sol/error.Create2Error.html">Create2Error</a></li>
<li><a href="contracts/utils/Clones.sol/library.Clones.html">Clones</a></li>
<li><a href="contracts/utils/ZeroCheck.sol/library.ZeroCheck.html">ZeroCheck</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="addressabletokenid"><a class="header" href="#addressabletokenid">AddressableTokenId</a></h1>
<p><a href="https://github.com/sonastream/core/blob/7c2284c734e2c8a2224e94ea1880647f1e8a0962/contracts/utils/AddressableTokenId.sol">Git Source</a></p>
<h2 id="state-variables-11"><a class="header" href="#state-variables-11">State Variables</a></h2>
<h3 id="_addressmask"><a class="header" href="#_addressmask">_ADDRESSMASK</a></h3>
<pre><code class="language-solidity">uint256 private constant _ADDRESSMASK =
    0xffffffffffffffffffffffffffffffffffffffff000000000000000000000000;
</code></pre>
<h3 id="_idmask"><a class="header" href="#_idmask">_IDMASK</a></h3>
<pre><code class="language-solidity">uint256 private constant _IDMASK =
    0x0000000000000000000000000000000000000000ffffffffffffffffffffffff;
</code></pre>
<h2 id="functions-19"><a class="header" href="#functions-19">Functions</a></h2>
<h3 id="getaddress"><a class="header" href="#getaddress">getAddress</a></h3>
<p><em>convert a tokenId to its artist's address</em></p>
<pre><code class="language-solidity">function getAddress(uint256 tokenId)
    internal
    pure
    returns (address tokenAddress);
</code></pre>
<h3 id="getartistedition"><a class="header" href="#getartistedition">getArtistEdition</a></h3>
<p><em>artistEditions are always even</em></p>
<pre><code class="language-solidity">function getArtistEdition(uint256 tokenId)
    internal
    pure
    returns (uint256 artistTokenId);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="createerror"><a class="header" href="#createerror">CreateError</a></h1>
<p><a href="https://github.com/sonastream/core/blob/7c2284c734e2c8a2224e94ea1880647f1e8a0962/contracts/utils/Clones.sol">Git Source</a></p>
<p>create opcode failed</p>
<pre><code class="language-solidity">error CreateError();
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="create2error"><a class="header" href="#create2error">Create2Error</a></h1>
<p><a href="https://github.com/sonastream/core/blob/7c2284c734e2c8a2224e94ea1880647f1e8a0962/contracts/utils/Clones.sol">Git Source</a></p>
<p>create2 opcode failed</p>
<pre><code class="language-solidity">error Create2Error();
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="clones"><a class="header" href="#clones">Clones</a></h1>
<p><a href="https://github.com/sonastream/core/blob/7c2284c734e2c8a2224e94ea1880647f1e8a0962/contracts/utils/Clones.sol">Git Source</a></p>
<h2 id="functions-20"><a class="header" href="#functions-20">Functions</a></h2>
<h3 id="clone"><a class="header" href="#clone">clone</a></h3>
<p><em>Deploys and returns the address of a clone that mimics the behaviour of <code>implementation</code>
except when someone calls <code>receive()</code> and then it emits an event matching
<code>SplitWallet.ReceiveETH(indexed address, amount)</code>
Inspired by OZ &amp; 0age's minimal clone implementations based on eip 1167 found at
https://github.com/OpenZeppelin/openzeppelin-contracts/blob/v4.3.0/contracts/proxy/Clones.sol
and https://medium.com/coinmonks/the-more-minimal-proxy-5756ae08ee48
This function uses the create2 opcode and a <code>salt</code> to deterministically deploy
the clone. Using the same <code>implementation</code> and <code>salt</code> multiple time will revert, since
the clones cannot be deployed twice at the same address.
init: 0x3d605d80600a3d3981f3
3d   returndatasize  0
605d push1 0x5d      0x5d 0
80   dup1            0x5d 0x5d 0
600a push1 0x0a      0x0a 0x5d 0x5d 0
3d   returndatasize  0 0x0a 0x5d 0x5d 0
39   codecopy        0x5d 0                    destOffset offset length     memory[destOffset:destOffset+length] = address(this).code[offset:offset+length]       copy executing contracts bytecode
81   dup2            0 0x5d 0
f3   return          0                         offset length                return memory[offset:offset+length]                                                   returns from this contract call
code: 0x36603057343d52307f830d2d700a97af574b186c80d40429385d24241565b08a7c559ba283a964d9b160203da23d3df35b3d3d3d3d363d3d37363d73bebebebebebebebebebebebebebebebebebebebe5af43d3d93803e605b57fd5bf3
0x000     36       calldatasize      cds
0x001     6030     push1 0x30        0x30 cds
,=&lt; 0x003     57       jumpi
|   0x004     34       callvalue         cv
|   0x005     3d       returndatasize    0 cv
|   0x006     52       mstore
|   0x007     30       address           addr
|   0x008     7f830d.. push32 0x830d..   id addr
|   0x029     6020     push1 0x20        0x20 id addr
|   0x02b     3d       returndatasize    0 0x20 id addr
|   0x02c     a2       log2
|   0x02d     3d       returndatasize    0
|   0x02e     3d       returndatasize    0 0
|   0x02f     f3       return
<code>-&gt; 0x030     5b       jumpdest 0x031     3d       returndatasize    0 0x032     3d       returndatasize    0 0 0x033     3d       returndatasize    0 0 0 0x034     3d       returndatasize    0 0 0 0 0x035     36       calldatasize      cds 0 0 0 0 0x036     3d       returndatasize    0 cds 0 0 0 0 0x037     3d       returndatasize    0 0 cds 0 0 0 0 0x038     37       calldatacopy      0 0 0 0 0x039     36       calldatasize      cds 0 0 0 0 0x03a     3d       returndatasize    0 cds 0 0 0 0 0x03b     73bebe.. push20 0xbebe..   0xbebe 0 cds 0 0 0 0 0x050     5a       gas               gas 0xbebe 0 cds 0 0 0 0 0x051     f4       delegatecall      suc 0 0 0x052     3d       returndatasize    rds suc 0 0 0x053     3d       returndatasize    rds rds suc 0 0 0x054     93       swap4             0 rds suc 0 rds 0x055     80       dup1              0 0 rds suc 0 rds 0x056     3e       returndatacopy    suc 0 rds 0x057     605b     push1 0x5b        0x5b suc 0 rds ,=&lt; 0x059     57       jumpi             0 rds |   0x05a     fd       revert </code>-&gt; 0x05b     5b       jumpdest          0 rds
0x05c     f3       return</em></p>
<pre><code class="language-solidity">function clone(address implementation) internal returns (address instance);
</code></pre>
<h3 id="clonedeterministic"><a class="header" href="#clonedeterministic">cloneDeterministic</a></h3>
<pre><code class="language-solidity">function cloneDeterministic(address implementation, bytes32 salt)
    internal
    returns (address instance);
</code></pre>
<h3 id="predictdeterministicaddress"><a class="header" href="#predictdeterministicaddress">predictDeterministicAddress</a></h3>
<p><em>Computes the address of a clone deployed using {Clones-cloneDeterministic}.</em></p>
<pre><code class="language-solidity">function predictDeterministicAddress(
    address implementation,
    bytes32 salt,
    address deployer
) internal pure returns (address predicted);
</code></pre>
<h3 id="predictdeterministicaddress-1"><a class="header" href="#predictdeterministicaddress-1">predictDeterministicAddress</a></h3>
<p><em>Computes the address of a clone deployed using {Clones-cloneDeterministic}.</em></p>
<pre><code class="language-solidity">function predictDeterministicAddress(address implementation, bytes32 salt)
    internal
    view
    returns (address predicted);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="zerocheck"><a class="header" href="#zerocheck">ZeroCheck</a></h1>
<p><a href="https://github.com/sonastream/core/blob/7c2284c734e2c8a2224e94ea1880647f1e8a0962/contracts/utils/ZeroCheck.sol">Git Source</a></p>
<h2 id="functions-21"><a class="header" href="#functions-21">Functions</a></h2>
<h3 id="iszero"><a class="header" href="#iszero">isZero</a></h3>
<pre><code class="language-solidity">function isZero(address _addr) public pure returns (bool isAddrZero);
</code></pre>
<h3 id="isnotzero"><a class="header" href="#isnotzero">isNotZero</a></h3>
<pre><code class="language-solidity">function isNotZero(address _addr) public pure returns (bool isAddrNotZero);
</code></pre>
<h3 id="revertifzero"><a class="header" href="#revertifzero">revertIfZero</a></h3>
<pre><code class="language-solidity">function revertIfZero(address _addr, bytes4 _selector) public pure;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sonareserveauction"><a class="header" href="#sonareserveauction">SonaReserveAuction</a></h1>
<p><a href="https://github.com/sonastream/core/blob/7c2284c734e2c8a2224e94ea1880647f1e8a0962/contracts/SonaReserveAuction.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="contracts/SonaReserveAuction.sol//contracts/interfaces/ISonaReserveAuction.sol/interface.ISonaReserveAuction.html">ISonaReserveAuction</a>, Initializable, <a href="contracts/SonaReserveAuction.sol//contracts/access/SonaAdmin.sol/contract.SonaAdmin.html">SonaAdmin</a></p>
<h2 id="state-variables-12"><a class="header" href="#state-variables-12">State Variables</a></h2>
<h3 id="_auction_duration"><a class="header" href="#_auction_duration">_AUCTION_DURATION</a></h3>
<pre><code class="language-solidity">uint256 private constant _AUCTION_DURATION = 24 hours;
</code></pre>
<h3 id="_auction_extension_duration"><a class="header" href="#_auction_extension_duration">_AUCTION_EXTENSION_DURATION</a></h3>
<pre><code class="language-solidity">uint256 private constant _AUCTION_EXTENSION_DURATION = 15 minutes;
</code></pre>
<h3 id="_auction_extension_bps"><a class="header" href="#_auction_extension_bps">_AUCTION_EXTENSION_BPS</a></h3>
<pre><code class="language-solidity">uint256 private constant _AUCTION_EXTENSION_BPS = 500;
</code></pre>
<h3 id="_auction_redistribution_fee_bps"><a class="header" href="#_auction_redistribution_fee_bps">_AUCTION_REDISTRIBUTION_FEE_BPS</a></h3>
<pre><code class="language-solidity">uint256 private constant _AUCTION_REDISTRIBUTION_FEE_BPS = 500;
</code></pre>
<h3 id="_auction_treasury_fee_bps"><a class="header" href="#_auction_treasury_fee_bps">_AUCTION_TREASURY_FEE_BPS</a></h3>
<pre><code class="language-solidity">uint256 private constant _AUCTION_TREASURY_FEE_BPS = 200;
</code></pre>
<h3 id="_eip712domain_typehash"><a class="header" href="#_eip712domain_typehash">_EIP712DOMAIN_TYPEHASH</a></h3>
<pre><code class="language-solidity">bytes32 private constant _EIP712DOMAIN_TYPEHASH = keccak256(
    &quot;EIP712Domain(string name,string version,uint256 chainId,address verifyingContract)&quot;
);
</code></pre>
<h3 id="_metadatabundle_typehash"><a class="header" href="#_metadatabundle_typehash">_METADATABUNDLE_TYPEHASH</a></h3>
<pre><code class="language-solidity">bytes32 private constant _METADATABUNDLE_TYPEHASH = keccak256(
    &quot;MetadataBundle(uint256 tokenId,address payout,string arweaveTxId)&quot;
);
</code></pre>
<h3 id="_treasuryfeerecipient"><a class="header" href="#_treasuryfeerecipient">_treasuryFeeRecipient</a></h3>
<pre><code class="language-solidity">address private _treasuryFeeRecipient;
</code></pre>
<h3 id="_redistributionfeerecipient"><a class="header" href="#_redistributionfeerecipient">_redistributionFeeRecipient</a></h3>
<pre><code class="language-solidity">address private _redistributionFeeRecipient;
</code></pre>
<h3 id="rewardtoken-2"><a class="header" href="#rewardtoken-2">rewardToken</a></h3>
<pre><code class="language-solidity">ISonaRewardToken public rewardToken;
</code></pre>
<h3 id="_domain_separator"><a class="header" href="#_domain_separator">_DOMAIN_SEPARATOR</a></h3>
<pre><code class="language-solidity">bytes32 private _DOMAIN_SEPARATOR;
</code></pre>
<h3 id="_authorizer"><a class="header" href="#_authorizer">_authorizer</a></h3>
<pre><code class="language-solidity">address private _authorizer;
</code></pre>
<h3 id="_weth"><a class="header" href="#_weth">_weth</a></h3>
<pre><code class="language-solidity">IWETH private _weth;
</code></pre>
<h3 id="auctions"><a class="header" href="#auctions">auctions</a></h3>
<pre><code class="language-solidity">mapping(uint256 =&gt; Auction) public auctions;
</code></pre>
<h3 id="_uriexists"><a class="header" href="#_uriexists">_uriExists</a></h3>
<pre><code class="language-solidity">mapping(bytes32 =&gt; bool) private _uriExists;
</code></pre>
<h2 id="functions-22"><a class="header" href="#functions-22">Functions</a></h2>
<h3 id="onlysonaadminorapprovedtokenoperator"><a class="header" href="#onlysonaadminorapprovedtokenoperator">onlySonaAdminOrApprovedTokenOperator</a></h3>
<p><em>Modifier that ensures the calling wallet has the admin role or is the specified owner</em></p>
<pre><code class="language-solidity">modifier onlySonaAdminOrApprovedTokenOperator(uint256 _tokenId);
</code></pre>
<h3 id="bundlesauthorized"><a class="header" href="#bundlesauthorized">bundlesAuthorized</a></h3>
<pre><code class="language-solidity">modifier bundlesAuthorized(
    MetadataBundle[2] calldata bundles,
    Signature[2] calldata signatures
);
</code></pre>
<h3 id="constructor-4"><a class="header" href="#constructor-4">constructor</a></h3>
<pre><code class="language-solidity">constructor();
</code></pre>
<h3 id="initialize-2"><a class="header" href="#initialize-2">initialize</a></h3>
<pre><code class="language-solidity">function initialize(
    address treasuryFeeRecipient_,
    address redistributionFeeRecipient_,
    address authorizer_,
    ISonaRewardToken _rewardTokenBase,
    address _eoaAdmin,
    IWETH weth_
) public initializer;
</code></pre>
<h3 id="supportsinterface-1"><a class="header" href="#supportsinterface-1">supportsInterface</a></h3>
<pre><code class="language-solidity">function supportsInterface(bytes4 _interfaceId)
    public
    view
    virtual
    override
    returns (bool);
</code></pre>
<h3 id="createreserveauction-1"><a class="header" href="#createreserveauction-1">createReserveAuction</a></h3>
<p>Creates a new auction.</p>
<p><em>Creating a reserve auction does not start it.
Auctions are started once a bid of the reserve price or higher is placed.</em></p>
<pre><code class="language-solidity">function createReserveAuction(
    MetadataBundle[2] calldata _bundles,
    Signature[2] calldata _signatures,
    address _currencyAddress,
    uint256 _reservePrice
)
    external
    bundlesAuthorized(_bundles, _signatures)
    onlySonaAdminOrApprovedTokenOperator(_bundles[0].tokenId)
    onlySonaAdminOrApprovedTokenOperator(_bundles[1].tokenId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_bundles</code></td><td><code>MetadataBundle[2]</code></td><td></td></tr>
<tr><td><code>_signatures</code></td><td><code>Signature[2]</code></td><td></td></tr>
<tr><td><code>_currencyAddress</code></td><td><code>address</code></td><td>The address of the currency bids will be in.</td></tr>
<tr><td><code>_reservePrice</code></td><td><code>uint256</code></td><td>The reserve price of the auction.</td></tr>
</tbody></table>
</div>
<h3 id="settlereserveauction-1"><a class="header" href="#settlereserveauction-1">settleReserveAuction</a></h3>
<p><em>Public function to settle the reseerve auction</em></p>
<pre><code class="language-solidity">function settleReserveAuction(uint256 _tokenId)
    external
    onlySonaAdminOrApprovedTokenOperator(_tokenId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_tokenId</code></td><td><code>uint256</code></td><td>The ID of the token.</td></tr>
</tbody></table>
</div>
<h3 id="cancelreserveauction-1"><a class="header" href="#cancelreserveauction-1">cancelReserveAuction</a></h3>
<p><em>Public function to cancel the reserve auction</em></p>
<pre><code class="language-solidity">function cancelReserveAuction(uint256 _tokenId)
    external
    onlySonaAdminOrApprovedTokenOperator(_tokenId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_tokenId</code></td><td><code>uint256</code></td><td>The ID of the token.</td></tr>
</tbody></table>
</div>
<h3 id="updatereserveauctionprice-1"><a class="header" href="#updatereserveauctionprice-1">updateReserveAuctionPrice</a></h3>
<p><em>Public function to update the reserve price of the auction</em></p>
<pre><code class="language-solidity">function updateReserveAuctionPrice(uint256 _tokenId, uint256 _reservePrice)
    external
    onlySonaAdminOrApprovedTokenOperator(_tokenId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_tokenId</code></td><td><code>uint256</code></td><td>The ID of the token.</td></tr>
<tr><td><code>_reservePrice</code></td><td><code>uint256</code></td><td>The reserve price to be updated to</td></tr>
</tbody></table>
</div>
<h3 id="updatereserveauctionpriceandcurrency-1"><a class="header" href="#updatereserveauctionpriceandcurrency-1">updateReserveAuctionPriceAndCurrency</a></h3>
<p><em>Public function to update the curency and reserve price of the auction</em></p>
<pre><code class="language-solidity">function updateReserveAuctionPriceAndCurrency(
    address _currency,
    uint256 _tokenId,
    uint256 _reservePrice
) external onlySonaAdminOrApprovedTokenOperator(_tokenId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_currency</code></td><td><code>address</code></td><td>The currency to be updated to</td></tr>
<tr><td><code>_tokenId</code></td><td><code>uint256</code></td><td>The ID of the token.</td></tr>
<tr><td><code>_reservePrice</code></td><td><code>uint256</code></td><td>The reserve price to be updated to</td></tr>
</tbody></table>
</div>
<h3 id="updateartistpayoutaddress"><a class="header" href="#updateartistpayoutaddress">updateArtistPayoutAddress</a></h3>
<p>set the payout address to <code>_payout</code> for auction with id <code>_tokenId</code></p>
<p><em>setting the address to address(0) resets the payout address to the seller's address</em></p>
<pre><code class="language-solidity">function updateArtistPayoutAddress(uint256 _tokenId, address payable _payout)
    external
    onlySonaAdminOrApprovedTokenOperator(_tokenId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_tokenId</code></td><td><code>uint256</code></td><td>The artist tokenId used as the identifier for the auction</td></tr>
<tr><td><code>_payout</code></td><td><code>address payable</code></td><td>The address to receive NFT sale proceeds and future reward claims</td></tr>
</tbody></table>
</div>
<h3 id="createbid-1"><a class="header" href="#createbid-1">createBid</a></h3>
<p><em>Public function to bid on a reserve auction</em></p>
<pre><code class="language-solidity">function createBid(uint256 _tokenId, uint256 _bidAmount) external payable;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_tokenId</code></td><td><code>uint256</code></td><td>The ID of the token.</td></tr>
<tr><td><code>_bidAmount</code></td><td><code>uint256</code></td><td>The amount of the bid if the currency is not ETH</td></tr>
</tbody></table>
</div>
<h3 id="getauction-1"><a class="header" href="#getauction-1">getAuction</a></h3>
<p><em>Public function to fetch an auction</em></p>
<pre><code class="language-solidity">function getAuction(uint256 _tokenId) external view returns (Auction memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_tokenId</code></td><td><code>uint256</code></td><td>The ID of the token.</td></tr>
</tbody></table>
</div>
<h3 id="_verify"><a class="header" href="#_verify">_verify</a></h3>
<pre><code class="language-solidity">function _verify(MetadataBundle calldata _bundle, uint8 v, bytes32 r, bytes32 s)
    internal
    view
    returns (bool valid);
</code></pre>
<h3 id="_recoveraddress"><a class="header" href="#_recoveraddress">_recoverAddress</a></h3>
<pre><code class="language-solidity">function _recoverAddress(
    MetadataBundle calldata _bundle,
    uint8 v,
    bytes32 r,
    bytes32 s
) internal view returns (address recovered);
</code></pre>
<h3 id="_hash"><a class="header" href="#_hash">_hash</a></h3>
<pre><code class="language-solidity">function _hash(MetadataBundle calldata bundle)
    internal
    pure
    returns (bytes32);
</code></pre>
<h3 id="_settlereserveauction"><a class="header" href="#_settlereserveauction">_settleReserveAuction</a></h3>
<p><em>Internal function to settle the reserve auction</em></p>
<pre><code class="language-solidity">function _settleReserveAuction(uint256 _tokenId) private;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_tokenId</code></td><td><code>uint256</code></td><td>The ID of the token.</td></tr>
</tbody></table>
</div>
<h3 id="_ensurebundleisunique"><a class="header" href="#_ensurebundleisunique">_ensureBundleIsUnique</a></h3>
<pre><code class="language-solidity">function _ensureBundleIsUnique(MetadataBundle calldata _bundle) internal;
</code></pre>
<h3 id="_handletokentransfer"><a class="header" href="#_handletokentransfer">_handleTokenTransfer</a></h3>
<pre><code class="language-solidity">function _handleTokenTransfer(address _to, uint256 _amount, address _currency)
    internal;
</code></pre>
<h3 id="_sendcurrencytoparticipant"><a class="header" href="#_sendcurrencytoparticipant">_sendCurrencyToParticipant</a></h3>
<pre><code class="language-solidity">function _sendCurrencyToParticipant(
    address payable _to,
    uint256 _amount,
    address _currency
) internal;
</code></pre>
<h3 id="_wrapandsendeth"><a class="header" href="#_wrapandsendeth">_wrapAndSendEth</a></h3>
<pre><code class="language-solidity">function _wrapAndSendEth(address _to, uint256 _amount) internal;
</code></pre>
<h3 id="_transfertokenout"><a class="header" href="#_transfertokenout">_transferTokenOut</a></h3>
<pre><code class="language-solidity">function _transferTokenOut(address _to, uint256 _amount, address _currency)
    internal;
</code></pre>
<h3 id="_getpayoutaddress"><a class="header" href="#_getpayoutaddress">_getPayoutAddress</a></h3>
<pre><code class="language-solidity">function _getPayoutAddress(MetadataBundle storage _bundle)
    internal
    view
    returns (address payable payoutAddress);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sonarewardtoken"><a class="header" href="#sonarewardtoken">SonaRewardToken</a></h1>
<p><a href="https://github.com/sonastream/core/blob/7c2284c734e2c8a2224e94ea1880647f1e8a0962/contracts/SonaRewardToken.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="contracts/SonaRewardToken.sol//contracts/access/SonaMinter.sol/abstract.SonaMinter.html">SonaMinter</a>, <a href="contracts/SonaRewardToken.sol//contracts/interfaces/ISonaRewardToken.sol/interface.ISonaRewardToken.html">ISonaRewardToken</a></p>
<h2 id="state-variables-13"><a class="header" href="#state-variables-13">State Variables</a></h2>
<h3 id="rewardtokens"><a class="header" href="#rewardtokens">rewardTokens</a></h3>
<pre><code class="language-solidity">mapping(uint256 =&gt; ISonaRewardToken.RewardToken) public rewardTokens;
</code></pre>
<h2 id="functions-23"><a class="header" href="#functions-23">Functions</a></h2>
<h3 id="onlysonaadminorcreator"><a class="header" href="#onlysonaadminorcreator">onlySonaAdminOrCreator</a></h3>
<p><em>Modifier that ensures the calling contract has the admin role</em></p>
<pre><code class="language-solidity">modifier onlySonaAdminOrCreator(uint256 _tokenId);
</code></pre>
<h3 id="onlytokenholder"><a class="header" href="#onlytokenholder">onlyTokenHolder</a></h3>
<pre><code class="language-solidity">modifier onlyTokenHolder(uint256 _tokenId);
</code></pre>
<h3 id="checkexists"><a class="header" href="#checkexists">checkExists</a></h3>
<p><em>Modifier that ensures the tokenId has been minted and not burned</em></p>
<pre><code class="language-solidity">modifier checkExists(uint256 _tokenId);
</code></pre>
<h3 id="constructor-5"><a class="header" href="#constructor-5">constructor</a></h3>
<pre><code class="language-solidity">constructor() ERC721(&quot;&quot;, &quot;&quot;);
</code></pre>
<h3 id="initialize-3"><a class="header" href="#initialize-3">initialize</a></h3>
<p><em>Initializes the contract</em></p>
<pre><code class="language-solidity">function initialize(
    string calldata _name,
    string calldata _symbol,
    address _eoaAdmin,
    address _minter
) external override initializer;
</code></pre>
<h3 id="mintfromauction-1"><a class="header" href="#mintfromauction-1">mintFromAuction</a></h3>
<p>this mint function is called by an auction contract</p>
<p><em>only an account with the SonaMinter role can call this function</em></p>
<pre><code class="language-solidity">function mintFromAuction(
    uint256 _tokenId,
    address _artist,
    address _collector,
    string calldata _artistTxId,
    string calldata _collectorTxId,
    address payable _payout
) external onlySonaMinter;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_tokenId</code></td><td><code>uint256</code></td><td>The ID of the token that will be minted</td></tr>
<tr><td><code>_artist</code></td><td><code>address</code></td><td>The address contained in the tokenId</td></tr>
<tr><td><code>_collector</code></td><td><code>address</code></td><td>The address that won the auction</td></tr>
<tr><td><code>_artistTxId</code></td><td><code>string</code></td><td>the arweave txId of the artist edition bundle contained on arweave</td></tr>
<tr><td><code>_collectorTxId</code></td><td><code>string</code></td><td>the arweave txId of the collector edition bundle contained on arweave</td></tr>
<tr><td><code>_payout</code></td><td><code>address payable</code></td><td>the address to distribute funds to, potentially to split them with collaborators</td></tr>
</tbody></table>
</div>
<h3 id="updatearweavetxid-1"><a class="header" href="#updatearweavetxid-1">updateArweaveTxId</a></h3>
<p><em>Updates the IPFS CID for the metadata for a given RewardToken</em></p>
<pre><code class="language-solidity">function updateArweaveTxId(uint256 _tokenId, string calldata _txId)
    external
    checkExists(_tokenId)
    onlySonaAdminOrCreator(_tokenId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_tokenId</code></td><td><code>uint256</code></td><td>The ID of the token that will be updated</td></tr>
<tr><td><code>_txId</code></td><td><code>string</code></td><td>The metadata's IPFS CID</td></tr>
</tbody></table>
</div>
<h3 id="updatepayoutaddress"><a class="header" href="#updatepayoutaddress">updatePayoutAddress</a></h3>
<p><em>Updates the Payout address for artist editions</em></p>
<pre><code class="language-solidity">function updatePayoutAddress(uint256 _tokenId, address payable _payout)
    external
    checkExists(_tokenId)
    onlyTokenHolder(_tokenId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_tokenId</code></td><td><code>uint256</code></td><td>The ID of the token that will be updated</td></tr>
<tr><td><code>_payout</code></td><td><code>address payable</code></td><td>The new payout address to be used. Set to address(0) if funds should be sent directly to the claimant</td></tr>
</tbody></table>
</div>
<h3 id="burnrewardtoken-1"><a class="header" href="#burnrewardtoken-1">burnRewardToken</a></h3>
<p><em>Removes a RewardToken from the protocol, burning the NFT and striking the data from on-chain memory</em></p>
<pre><code class="language-solidity">function burnRewardToken(uint256 _tokenId) external onlyTokenHolder(_tokenId);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_tokenId</code></td><td><code>uint256</code></td><td>The ID of the token that will be deleted</td></tr>
</tbody></table>
</div>
<h3 id="tokenuri-1"><a class="header" href="#tokenuri-1">tokenURI</a></h3>
<p><em>Get a RewardToken's metadata from IPFS</em></p>
<pre><code class="language-solidity">function tokenURI(uint256 _tokenId)
    public
    view
    override(ERC721, ISonaRewardToken)
    checkExists(_tokenId)
    returns (string memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_tokenId</code></td><td><code>uint256</code></td><td>The ID of the token to fetch</td></tr>
</tbody></table>
</div>
<h3 id="getrewardtokenmetadata-1"><a class="header" href="#getrewardtokenmetadata-1">getRewardTokenMetadata</a></h3>
<p><em>Returns the metadata of the RewardToken</em></p>
<pre><code class="language-solidity">function getRewardTokenMetadata(uint256 _tokenId)
    external
    view
    checkExists(_tokenId)
    returns (RewardToken memory metadata);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_tokenId</code></td><td><code>uint256</code></td><td>The ID of the token to fetch</td></tr>
</tbody></table>
</div>
<h3 id="getrewardtokenpayoutaddr-2"><a class="header" href="#getrewardtokenpayoutaddr-2">getRewardTokenPayoutAddr</a></h3>
<p><em>Returns the splits address of the RewardToken</em></p>
<pre><code class="language-solidity">function getRewardTokenPayoutAddr(uint256 _tokenId)
    external
    view
    checkExists(_tokenId)
    returns (address payable payout);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_tokenId</code></td><td><code>uint256</code></td><td>The ID of the token to fetch</td></tr>
</tbody></table>
</div>
<h3 id="tokenidexists-1"><a class="header" href="#tokenidexists-1">tokenIdExists</a></h3>
<p>Check if token <code>_tokenId</code> exists</p>
<pre><code class="language-solidity">function tokenIdExists(uint256 _tokenId) public view returns (bool exists);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_tokenId</code></td><td><code>uint256</code></td><td>The ID of the token to check</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>exists</code></td><td><code>bool</code></td><td>a boolean</td></tr>
</tbody></table>
</div>
<h3 id="_updatearweavetxid"><a class="header" href="#_updatearweavetxid">_updateArweaveTxId</a></h3>
<pre><code class="language-solidity">function _updateArweaveTxId(uint256 _tokenId, string calldata _txId) internal;
</code></pre>
<h3 id="_settokenmetadata"><a class="header" href="#_settokenmetadata">_setTokenMetadata</a></h3>
<pre><code class="language-solidity">function _setTokenMetadata(
    uint256 _tokenId,
    string calldata _txId,
    address payable _payout
) internal;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sonarewards"><a class="header" href="#sonarewards">SonaRewards</a></h1>
<p><a href="https://github.com/sonastream/core/blob/7c2284c734e2c8a2224e94ea1880647f1e8a0962/contracts/SonaRewards.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
Initializable, <a href="contracts/SonaRewards.sol//contracts/access/SonaAdmin.sol/contract.SonaAdmin.html">SonaAdmin</a></p>
<h2 id="state-variables-14"><a class="header" href="#state-variables-14">State Variables</a></h2>
<h3 id="rewardroots"><a class="header" href="#rewardroots">rewardRoots</a></h3>
<p>A pseudo-array to hold each publish merkle root</p>
<p><em>This is a cleaner storage pattern for upgradable contracts compared to an actual array</em></p>
<pre><code class="language-solidity">mapping(uint256 =&gt; RewardRoot) public rewardRoots;
</code></pre>
<h3 id="datetimelastclaimed"><a class="header" href="#datetimelastclaimed">dateTimeLastClaimed</a></h3>
<p>the unix epoch timestamp representing the end of last period rewards were claimed for a given tokenId</p>
<p><em>this value can only monotonically increase, in order to prevent double claims</em></p>
<pre><code class="language-solidity">mapping(uint256 =&gt; uint64) public dateTimeLastClaimed;
</code></pre>
<h3 id="lastrootid"><a class="header" href="#lastrootid">lastRootId</a></h3>
<p>The id of the last RewardRoot published</p>
<pre><code class="language-solidity">uint256 public lastRootId;
</code></pre>
<h3 id="_rewardvault"><a class="header" href="#_rewardvault">_rewardVault</a></h3>
<pre><code class="language-solidity">address private _rewardVault;
</code></pre>
<h3 id="_sonarewardtoken"><a class="header" href="#_sonarewardtoken">_sonaRewardToken</a></h3>
<pre><code class="language-solidity">SonaRewardToken private _sonaRewardToken;
</code></pre>
<h3 id="_paymenttoken"><a class="header" href="#_paymenttoken">_paymentToken</a></h3>
<pre><code class="language-solidity">IERC20 private _paymentToken;
</code></pre>
<h3 id="_wethtoken"><a class="header" href="#_wethtoken">_wETHToken</a></h3>
<pre><code class="language-solidity">IWETH private _wETHToken;
</code></pre>
<h3 id="_claimlookupurl"><a class="header" href="#_claimlookupurl">_claimLookupUrl</a></h3>
<pre><code class="language-solidity">string private _claimLookupUrl;
</code></pre>
<h2 id="functions-24"><a class="header" href="#functions-24">Functions</a></h2>
<h3 id="constructor-6"><a class="header" href="#constructor-6">constructor</a></h3>
<p><em>a proxiable base contract should not be initializable</em></p>
<pre><code class="language-solidity">constructor();
</code></pre>
<h3 id="initialize-4"><a class="header" href="#initialize-4">initialize</a></h3>
<p>the constructor-like function used for proxy contracts</p>
<p><em>Pass in either a non-zero paymentToken_ or wETHToken_ param. One and only one should be non-zero</em></p>
<pre><code class="language-solidity">function initialize(
    address _eoaAdmin,
    SonaRewardToken sonaRewardToken_,
    IERC20 paymentToken_,
    IWETH wETHToken_,
    address rewardVault_,
    string calldata claimLookupUrl_
) public initializer;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_eoaAdmin</code></td><td><code>address</code></td><td>The administrator of proxy upgrades and RewardRoots</td></tr>
<tr><td><code>sonaRewardToken_</code></td><td><code>SonaRewardToken</code></td><td>The address of the SonaRewardToken NFT smart contract</td></tr>
<tr><td><code>paymentToken_</code></td><td><code>IERC20</code></td><td>The address of the reward token Collectors and Artists earn</td></tr>
<tr><td><code>wETHToken_</code></td><td><code>IWETH</code></td><td>The address of the wETH token if Collectors and Artists earn ETH</td></tr>
<tr><td><code>rewardVault_</code></td><td><code>address</code></td><td>The holder of the reward token that has granted this contract enough of an allowance to operate</td></tr>
<tr><td><code>claimLookupUrl_</code></td><td><code>string</code></td><td>The templated url returned via <code>OffchainLookup</code>. Must be EIP-3668 compliant</td></tr>
</tbody></table>
</div>
<h3 id="receive-3"><a class="header" href="#receive-3">receive</a></h3>
<p><em>only accept ETH from our registered <code>_wETHToken</code></em></p>
<pre><code class="language-solidity">receive() external payable;
</code></pre>
<h3 id="addroot"><a class="header" href="#addroot">addRoot</a></h3>
<p>publish a merkle tree root and allow Reward claims</p>
<p><em>the subsequent start time should be equal to the last published end time for given period</em></p>
<pre><code class="language-solidity">function addRoot(bytes32 _root, uint64 _start, uint64 _end)
    public
    onlySonaAdmin;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_root</code></td><td><code>bytes32</code></td><td>The hash of the merkle root to submit proofs against.</td></tr>
<tr><td><code>_start</code></td><td><code>uint64</code></td><td>The epoch start time (in seconds) for the reward period</td></tr>
<tr><td><code>_end</code></td><td><code>uint64</code></td><td>The epoch end time (in seconds) for the reward period</td></tr>
</tbody></table>
</div>
<h3 id="invalidateroot"><a class="header" href="#invalidateroot">invalidateRoot</a></h3>
<p>prevent claims against a published root</p>
<pre><code class="language-solidity">function invalidateRoot(uint256 _rootId) public onlySonaAdmin;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_rootId</code></td><td><code>uint256</code></td><td>The index number representing the root to be invalidated</td></tr>
</tbody></table>
</div>
<h3 id="claimlookup"><a class="header" href="#claimlookup">claimLookup</a></h3>
<p>get the api endpoint and request payload to get merkle claim info</p>
<p><em>this should always revert and allows for a fast preflight response</em></p>
<pre><code class="language-solidity">function claimLookup(uint256 _tokenId, uint64 _start, uint64 _end)
    public
    view;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_tokenId</code></td><td><code>uint256</code></td><td>The SonaRewardToken token ID</td></tr>
<tr><td><code>_start</code></td><td><code>uint64</code></td><td>The beginning of the time period to collect rewards for</td></tr>
<tr><td><code>_end</code></td><td><code>uint64</code></td><td>The end of the time period to collect rewards for</td></tr>
</tbody></table>
</div>
<h3 id="claimrewards"><a class="header" href="#claimrewards">claimRewards</a></h3>
<p>collect tokens by presenting valid proofs and owning token number <code>_tokenId</code></p>
<pre><code class="language-solidity">function claimRewards(
    uint256 _tokenId,
    uint256[] calldata _rootIds,
    bytes32[][] calldata _proofs,
    uint256[] calldata _amounts
) public;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>_tokenId</code></td><td><code>uint256</code></td><td>The SonaRewardToken for which rewards are being claimed</td></tr>
<tr><td><code>_rootIds</code></td><td><code>uint256[]</code></td><td>the index numbers of the roots to prove against</td></tr>
<tr><td><code>_proofs</code></td><td><code>bytes32[][]</code></td><td>the proofs for each respective root</td></tr>
<tr><td><code>_amounts</code></td><td><code>uint256[]</code></td><td>the amounts to be claimed from each respective root</td></tr>
</tbody></table>
</div>
<h3 id="updateintegrations"><a class="header" href="#updateintegrations">updateIntegrations</a></h3>
<p>the contract owner can update state variables</p>
<pre><code class="language-solidity">function updateIntegrations(
    SonaRewardToken sonaRewardToken_,
    IERC20 paymentToken_,
    IWETH wETHToken_,
    address rewardVault_,
    string calldata claimLookupUrl_
) public onlySonaAdmin;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>sonaRewardToken_</code></td><td><code>SonaRewardToken</code></td><td>The address of the SonaRewardToken NFT smart contract</td></tr>
<tr><td><code>paymentToken_</code></td><td><code>IERC20</code></td><td>The address of the reward token Collectors and Artists earn</td></tr>
<tr><td><code>wETHToken_</code></td><td><code>IWETH</code></td><td>The address of the wETH token if Collectors and Artists earn ETH</td></tr>
<tr><td><code>rewardVault_</code></td><td><code>address</code></td><td>The holder of the reward token that has granted this contract enough of an allowance to operate</td></tr>
<tr><td><code>claimLookupUrl_</code></td><td><code>string</code></td><td>The templated url returned via <code>OffchainLookup</code>. Must be EIP-3668 compliant</td></tr>
</tbody></table>
</div>
<h3 id="_claimrewardsone"><a class="header" href="#_claimrewardsone">_claimRewardsOne</a></h3>
<pre><code class="language-solidity">function _claimRewardsOne(
    uint256 _tokenId,
    uint256 _rootId,
    bytes32[] calldata _proof,
    uint256 _amount
) internal;
</code></pre>
<h3 id="_updateintegrations"><a class="header" href="#_updateintegrations">_updateIntegrations</a></h3>
<pre><code class="language-solidity">function _updateIntegrations(
    SonaRewardToken sonaRewardToken_,
    IERC20 paymentToken_,
    IWETH wETHToken_,
    address rewardVault_,
    string calldata claimLookupUrl_
) internal;
</code></pre>
<h3 id="_getpayoutaddress-1"><a class="header" href="#_getpayoutaddress-1">_getPayoutAddress</a></h3>
<pre><code class="language-solidity">function _getPayoutAddress(uint256 _tokenId, address _holder)
    internal
    view
    returns (address payable payoutAddress);
</code></pre>
<h2 id="events-7"><a class="header" href="#events-7">Events</a></h2>
<h3 id="integrationsupdated"><a class="header" href="#integrationsupdated">IntegrationsUpdated</a></h3>
<pre><code class="language-solidity">event IntegrationsUpdated(
    address sonaRewardToken,
    address paymentToken,
    address wETHToken,
    address rewardVault,
    string claimLookupUrl
);
</code></pre>
<h3 id="rewardrootcreated"><a class="header" href="#rewardrootcreated">RewardRootCreated</a></h3>
<pre><code class="language-solidity">event RewardRootCreated(
    uint256 indexed rootId, bytes32 indexed hash, uint64 start, uint64 end
);
</code></pre>
<h3 id="rewardrootinvalidated"><a class="header" href="#rewardrootinvalidated">RewardRootInvalidated</a></h3>
<pre><code class="language-solidity">event RewardRootInvalidated(uint256 indexed rootId);
</code></pre>
<h3 id="rewardsclaimed"><a class="header" href="#rewardsclaimed">RewardsClaimed</a></h3>
<pre><code class="language-solidity">event RewardsClaimed(
    uint256 indexed tokenId,
    address indexed claimant,
    uint256 indexed rootId,
    uint256 amount
);
</code></pre>
<h2 id="errors-3"><a class="header" href="#errors-3">Errors</a></h2>
<h3 id="rootnonexistent"><a class="header" href="#rootnonexistent">RootNonexistent</a></h3>
<pre><code class="language-solidity">error RootNonexistent(uint256 rootId);
</code></pre>
<h3 id="claimantnotholder"><a class="header" href="#claimantnotholder">ClaimantNotHolder</a></h3>
<pre><code class="language-solidity">error ClaimantNotHolder(address claimant, uint256 tokenId);
</code></pre>
<h3 id="claimlengthmismatch"><a class="header" href="#claimlengthmismatch">ClaimLengthMismatch</a></h3>
<pre><code class="language-solidity">error ClaimLengthMismatch();
</code></pre>
<h3 id="invalidproof"><a class="header" href="#invalidproof">InvalidProof</a></h3>
<pre><code class="language-solidity">error InvalidProof();
</code></pre>
<h3 id="invalidclaimattempt"><a class="header" href="#invalidclaimattempt">InvalidClaimAttempt</a></h3>
<pre><code class="language-solidity">error InvalidClaimAttempt();
</code></pre>
<h3 id="startnotbeforeend"><a class="header" href="#startnotbeforeend">StartNotBeforeEnd</a></h3>
<pre><code class="language-solidity">error StartNotBeforeEnd(uint64 start, uint64 end);
</code></pre>
<h3 id="rewardtransferfailed"><a class="header" href="#rewardtransferfailed">RewardTransferFailed</a></h3>
<pre><code class="language-solidity">error RewardTransferFailed();
</code></pre>
<h3 id="invalidtokeninputs"><a class="header" href="#invalidtokeninputs">InvalidTokenInputs</a></h3>
<pre><code class="language-solidity">error InvalidTokenInputs(address paymentToken, address wETHToken);
</code></pre>
<h3 id="offchainlookup"><a class="header" href="#offchainlookup">OffchainLookup</a></h3>
<pre><code class="language-solidity">error OffchainLookup(
    address sender,
    string[] urls,
    bytes callData,
    bytes4 callbackFunction,
    bytes extraData
);
</code></pre>
<h2 id="structs-3"><a class="header" href="#structs-3">Structs</a></h2>
<h3 id="rewardroot"><a class="header" href="#rewardroot">RewardRoot</a></h3>
<pre><code class="language-solidity">struct RewardRoot {
    bytes32 hash;
    uint64 start;
    uint64 end;
}
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="solidity.min.js"></script>

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
